# å·¥å•çŠ¶æ€å˜æ›´

å¯ç›‘å¬å·¥å•çŠ¶æ€å’Œé˜¶æ®µå˜æ›´äº‹ä»¶ã€‚éœ€ä½¿ç”¨è®¢é˜…æ¥å£è®¢é˜…ï¼šäº‹ä»¶è®¢é˜…ã€‚



> **ğŸ“ æ³¨æ„**
> å¦‚æœä½ éœ€è¦ç›‘å¬å·¥å•çš„é˜¶æ®µå˜æ›´ï¼Œå¯ä»¥ä½¿ç”¨è¯¥äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨è¯¥äº‹ä»¶ç›‘å¬å·¥å•é˜¶æ®µç”±æœºå™¨äººå˜æ›´ä¸ºäººå·¥ã€‚{ä½¿ç”¨ç¤ºä¾‹}(url=/api/tools/api_explore/api_explore_config?project=helpdesk&version=v1&resource=ticket&event=updated)

html
<md-alert type="error">

</md-alert>
:::

<md-alert type="warn">

</md-alert>


<md-alert type="tip">

</md-alert>




## äº‹ä»¶
| åŸºæœ¬ |  |
| --- | --- |
| helpdesk.ticket.updated_v1 |
|  |
| è·å–æœåŠ¡å°èµ„æºè¯¦æƒ… |
| <br> è¯¥æ¥å£è¿”å›ä½“ä¸­å­˜åœ¨ä¸‹åˆ—æ•æ„Ÿå­—æ®µï¼Œä»…å½“å¼€å¯å¯¹åº”çš„æƒé™åæ‰ä¼šè¿”å›ï¼›å¦‚æœæ— éœ€è·å–è¿™äº›å­—æ®µï¼Œåˆ™ä¸å»ºè®®ç”³è¯·<br> <br> è·å–ç”¨æˆ· user ID |
| `Webhook` |





### äº‹ä»¶ä½“
<md-dt-table>
  <md-dt-thead>
      <md-dt-tr>
      <md-dt-th style="width: 40%;">åç§°</md-dt-th>
      <md-dt-th style="width: 20%;">ç±»å‹</md-dt-th>
      <md-dt-th style="width: 30%;">æè¿°</md-dt-th>
      </md-dt-tr>
  </md-dt-thead>
  <md-dt-tbody>
      
<md-dt-tr level="0">
	<md-dt-td>
	schema
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	äº‹ä»¶æ¨¡å¼
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="0">
	<md-dt-td>
	header
	</md-dt-td>
	<md-dt-td>
	event_header
	</md-dt-td>
	<md-dt-td>
	äº‹ä»¶å¤´
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	event_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	äº‹ä»¶ ID
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	event_type
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	äº‹ä»¶ç±»å‹
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	create_time
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	äº‹ä»¶åˆ›å»ºæ—¶é—´æˆ³ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	token
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	äº‹ä»¶ Token
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	app_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	åº”ç”¨ ID
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	tenant_key
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	ç§Ÿæˆ· Key
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="0">
	<md-dt-td>
	event
	</md-dt-td>
	<md-dt-td>
	\-
	</md-dt-td>
	<md-dt-td>
	\-
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	object
	</md-dt-td>
	<md-dt-td>
	ticket_event
	</md-dt-td>
	<md-dt-td>
	ticket after update
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	ticket_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	å·¥å•ID

å¯ä»¥ä»å·¥å•åˆ—è¡¨é‡Œé¢å–

ä¹Ÿå¯ä»¥è®¢é˜…å·¥å•åˆ›å»ºäº‹ä»¶è·å–
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	helpdesk_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	æœåŠ¡å°id
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	guest
	</md-dt-td>
	<md-dt-td>
	ticket_user_event
	</md-dt-td>
	<md-dt-td>
	ç”¨æˆ·id
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	id
	</md-dt-td>
	<md-dt-td>
	user_id
	</md-dt-td>
	<md-dt-td>
	id
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="4">
	<md-dt-td>
	union_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	ç”¨æˆ·çš„ union id
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="4">
	<md-dt-td>
	user_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	ç”¨æˆ·çš„ user id

**å­—æ®µæƒé™è¦æ±‚**ï¼š
è·å–ç”¨æˆ· user ID
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="4">
	<md-dt-td>
	open_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	ç”¨æˆ·çš„ open id
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	name
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	åç§°
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	stage
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å·¥å•é˜¶æ®µï¼š1. æœºå™¨äºº 2. äººå·¥
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	status
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å·¥å•çŠ¶æ€ï¼Œ1ï¼šå·²åˆ›å»º 2: å¤„ç†ä¸­ 3: æ’é˜Ÿä¸­ 4ï¼šå¾…å®š 5ï¼šå¾…ç”¨æˆ·å“åº” 50: è¢«æœºå™¨äººå…³é—­ 51: è¢«å®¢æœå…³é—­ 52: ç”¨æˆ·è‡ªå·±å…³é—­
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	score
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å·¥å•è¯„åˆ†ï¼Œ1ï¼šä¸æ»¡æ„ï¼Œ2:ä¸€èˆ¬ï¼Œ3:æ»¡æ„
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	created_at
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	åˆ›å»ºæ—¶é—´
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	updated_at
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å·¥å•æ›´æ–°æ—¶é—´ï¼Œæ²¡æœ‰å€¼æ—¶ä¸º-1
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	closed_at
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å…³å•æ—¶é—´
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	channel
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å·¥å•æ¸ é“ï¼Œæè¿°ï¼š9ï¼šOpen API 2ï¼šäºŒç»´ç  14ï¼šåˆ†äº« 13ï¼šæœç´¢ å…¶ä»–æ•°å­—ï¼šå…¶ä»–æ¸ é“
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	solve
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å·¥å•æ˜¯å¦è§£å†³ 1:æ²¡è§£å†³ 2:å·²è§£å†³
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	customized_fields
	</md-dt-td>
	<md-dt-td>
	customized_field_display_item\[\]
	</md-dt-td>
	<md-dt-td>
	è‡ªå®šä¹‰å­—æ®µ

**æ³¨æ„**ï¼šè¯¥äº‹ä»¶ä¸ä¼šè¿”å›è¯¥å€¼ï¼Œä½ å¯ä»¥è·å– ticket_id åè°ƒç”¨æŸ¥è¯¢æŒ‡å®šå·¥å•è¯¦æƒ…æ¥å£æŸ¥è¯¢è‡ªå®šä¹‰å­—æ®µä¿¡æ¯ã€‚
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	è‡ªå®šä¹‰å­—æ®µID
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	value
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	è‡ªå®šä¹‰å­—æ®µå€¼


	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	key_name
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	é”®å
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	display_name
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	å±•ç¤ºåç§°
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	position
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	å±•ç¤ºä½ç½®
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	required
	</md-dt-td>
	<md-dt-td>
	boolean
	</md-dt-td>
	<md-dt-td>
	æ˜¯å¦å¿…å¡«
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="3">
	<md-dt-td>
	editable
	</md-dt-td>
	<md-dt-td>
	boolean
	</md-dt-td>
	<md-dt-td>
	æ˜¯å¦å¯ä¿®æ”¹
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	chat_id
	</md-dt-td>
	<md-dt-td>
	string
	</md-dt-td>
	<md-dt-td>
	oc_xxxxxxx
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="1">
	<md-dt-td>
	old_object
	</md-dt-td>
	<md-dt-td>
	ticket_event_update_info
	</md-dt-td>
	<md-dt-td>
	ticket before update, only has updated fields
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	stage
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	ticket stage
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	status
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	ticket status
	</md-dt-td>
</md-dt-tr>


<md-dt-tr level="2">
	<md-dt-td>
	updated_at
	</md-dt-td>
	<md-dt-td>
	int
	</md-dt-td>
	<md-dt-td>
	ticket update time
	</md-dt-td>
</md-dt-tr>

  </md-dt-tbody>
</md-dt-table>




### äº‹ä»¶ä½“ç¤ºä¾‹
<md-code-json>
{
    "schema": "2.0",
    "header": {
        "event_id": "5e3702a84e847582be8db7fb73283c02",
        "event_type": "helpdesk.ticket.updated_v1",
        "create_time": "1608725989000",
        "token": "rvaYgkND1GOiu5MM0E1rncYC6PLtF7JV",
        "app_id": "cli_9f5343c580712544",
        "tenant_key": "2ca1d211f64f6438"
    },
    "event": {
        "object": {
            "ticket_id": "6626871355780366331",
            "helpdesk_id": "6626871355780366330",
            "guest": {
                "id": {
                    "union_id": "on_8ed6aa67826108097d9ee143816345",
                    "user_id": "e33ggbyz",
                    "open_id": "ou_84aad35d084aa403a838cf73ee18467"
                },
                "name": "abc"
            },
            "stage": 1,
            "status": 1,
            "score": 1,
            "created_at": 1616920429000,
            "updated_at": 1616920429000,
            "closed_at": 1616920429000,
            "channel": 0,
            "solve": 1,
            "customized_fields": [
                {
                    "id": "123",
                    "value": "value",
                    "key_name": "key",
                    "display_name": "display name",
                    "position": 1,
                    "required": true,
                    "editable": true
                }
            ],
            "chat_id": "oc_xxxxxxx"
        },
        "old_object": {
            "stage": 1,
            "status": 50,
            "updated_at": 1616920429000
        }
    }
}
</md-code-json>







### äº‹ä»¶è®¢é˜…ç¤ºä¾‹ä»£ç 

äº‹ä»¶è®¢é˜…æµç¨‹å¯å‚è€ƒï¼šäº‹ä»¶è®¢é˜…æ¦‚è¿°ï¼Œæ–°æ‰‹å…¥é—¨å¯å‚è€ƒï¼šæ•™ç¨‹

<div style="margin-bottom: 4px;display: flex;column-gap: 4px;align-items: center;">
  è®¢é˜…æ–¹å¼
  <md-tooltip>
    <ul class="md_render-table_solid md_render-table">
      <li><b>é•¿è¿æ¥æ–¹å¼ï¼ˆæ¨èï¼‰ï¼š</b>æ— éœ€å‘å¸ƒåˆ°å…¬ç½‘åœ°å€ï¼Œåœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­å³å¯æ¥æ”¶äº‹ä»¶å›è°ƒï¼Œä¸”æ— éœ€å¤„ç†åŠ è§£å¯†é€»è¾‘ã€‚</li>
      <li><b>å‘é€è‡³å¼€å‘è€…æœåŠ¡å™¨ï¼š</b>éœ€è¦æä¾›æœåŠ¡å™¨å…¬ç½‘åœ°å€ã€‚</li>
    </ul>
  </md-tooltip>
</div>


<md-code-tabs>
  <md-code-tab-group title="ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶">
	
    <md-code-tab-panel sdkType="golang-sdk">
package main

import (
	"context"
	"fmt"

	larkcore "github.com/larksuite/oapi-sdk-go/v3/core"
	larkevent "github.com/larksuite/oapi-sdk-go/v3/event"
	"github.com/larksuite/oapi-sdk-go/v3/event/dispatcher"
	"github.com/larksuite/oapi-sdk-go/v3/service/helpdesk/v1"
	larkws "github.com/larksuite/oapi-sdk-go/v3/ws"
)

// SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/golang-sdk-guide/preparations
func main() {
	// æ³¨å†Œäº‹ä»¶ Register event
	eventHandler := dispatcher.NewEventDispatcher("", "").
		OnP2TicketUpdatedV1(func(ctx context.Context, event *larkhelpdesk.P2TicketUpdatedV1) error {
			fmt.Printf("[ OnP2TicketUpdatedV1 access ], data: %s\n", larkcore.Prettify(event))
			return nil
		})

	// æ„å»º client Build client
	cli := larkws.NewClient("YOUR_APP_ID", "YOUR_APP_SECRET",
		larkws.WithEventHandler(eventHandler),
		larkws.WithLogLevel(larkcore.LogLevelDebug),
	)

	// å»ºç«‹é•¿è¿æ¥ Establish persistent connection
	err := cli.Start(context.Background())

	if err != nil {
		panic(err)
	}
}

    </md-code-tab-panel>

    <md-code-tab-panel sdkType="python-sdk">
# SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/python--sdk/preparations-before-development
import lark_oapi as lark


def do_p2_helpdesk_ticket_updated_v1(data: lark.helpdesk.v1.P2HelpdeskTicketUpdatedV1) -> None:
    print(f'[ do_p2_helpdesk_ticket_updated_v1 access ], data: {lark.JSON.marshal(data, indent=4)}')

# æ³¨å†Œäº‹ä»¶ Register event
event_handler = lark.EventDispatcherHandler.builder("", "") \
    .register_p2_helpdesk_ticket_updated_v1(do_p2_helpdesk_ticket_updated_v1) \
    .build()


def main():
    # æ„å»º client Build client
    cli = lark.ws.Client("APP_ID", "APP_SECRET",
                        event_handler=event_handler, log_level=lark.LogLevel.DEBUG)
    # å»ºç«‹é•¿è¿æ¥ Establish persistent connection
    cli.start()

if __name__ == "__main__":
    main()

    </md-code-tab-panel>

    <md-code-tab-panel sdkType="java-sdk">

package com.example.sample;

import com.lark.oapi.core.utils.Jsons;
import com.lark.oapi.service.helpdesk.HelpdeskService;
import com.lark.oapi.service.helpdesk.v1.model.P2TicketUpdatedV1;
import com.lark.oapi.event.EventDispatcher;
import com.lark.oapi.ws.Client;

// SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/java-sdk-guide/preparations
public class Sample {
    // æ³¨å†Œäº‹ä»¶ Register event
    private static final EventDispatcher EVENT_HANDLER = EventDispatcher.newBuilder("", "")
            .onP2TicketUpdatedV1(new HelpdeskService.P2TicketUpdatedV1Handler() {
                @Override
                public void handle(P2TicketUpdatedV1 event) throws Exception {
                    System.out.printf("[ onP2TicketUpdatedV1 access ], data: %s\n", Jsons.DEFAULT.toJson(event.getEvent()));
                }
            })
            .build();

    public static void main(String[] args) {
        // æ„å»º client Build client
        Client client = new Client.Builder("APP_ID", "APP_SECRET")
                .eventHandler(EVENT_HANDLER)
                .build();
        // å»ºç«‹é•¿è¿æ¥ Establish persistent connection
        client.start();
    }
}
    </md-code-tab-panel>

    <md-code-tab-panel sdkType="nodejs-sdk">
// SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/nodejs-sdk/preparation-before-development
import * as Lark from '@larksuiteoapi/node-sdk';
const baseConfig = {
    appId: 'APP_ID',
    appSecret: 'APP_SECRET'
}
// æ„å»º client Build client
const wsClient = new Lark.WSClient(baseConfig);
// å»ºç«‹é•¿è¿æ¥ Establish persistent connection
wsClient.start({
    // æ³¨å†Œäº‹ä»¶ Register event
    eventDispatcher: new Lark.EventDispatcher({}).register({
        'helpdesk.ticket.updated_v1': async (data) => {
            console.log(data);
        }
    })
});
    </md-code-tab-panel>

  </md-code-tab-group>
  <md-code-tab-group title="å°†äº‹ä»¶æ¨é€è‡³å¼€å‘è€…æœåŠ¡å™¨">
	
    <md-code-tab-panel sdkType="golang-sdk">
package main

import (
	"context"
	"fmt"
	"net/http"

	larkcore "github.com/larksuite/oapi-sdk-go/v3/core"
	"github.com/larksuite/oapi-sdk-go/v3/core/httpserverext"
	larkevent "github.com/larksuite/oapi-sdk-go/v3/event"
	"github.com/larksuite/oapi-sdk-go/v3/event/dispatcher"
	"github.com/larksuite/oapi-sdk-go/v3/service/helpdesk/v1"
)

// SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/golang-sdk-guide/preparations
func main() {
	// æ³¨å†Œäº‹ä»¶ Register event
	eventHandler := dispatcher.NewEventDispatcher("", "").
		OnP2TicketUpdatedV1(func(ctx context.Context, event *larkhelpdesk.P2TicketUpdatedV1) error {
			fmt.Printf("[ OnP2TicketUpdatedV1 access ], data: %s\n", larkcore.Prettify(event))
			return nil
		})

	// åˆ›å»ºè·¯ç”±å¤„ç†å™¨ Create route handler
	http.HandleFunc("/webhook/event", httpserverext.NewEventHandlerFunc(handler, larkevent.WithLogLevel(larkcore.LogLevelDebug)))

	err := http.ListenAndServe(":7777", nil)

	if err != nil {
		panic(err)
	}
}

    </md-code-tab-panel>

    <md-code-tab-panel sdkType="python-sdk">
# SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/python--sdk/preparations-before-development
from flask import Flask
from lark_oapi.adapter.flask import *
import lark_oapi as lark

app = Flask(__name__)


def do_p2_helpdesk_ticket_updated_v1(data: lark.helpdesk.v1.P2HelpdeskTicketUpdatedV1) -> None:
    print(f'[ do_p2_helpdesk_ticket_updated_v1 access ], data: {lark.JSON.marshal(data, indent=4)}')

# æ³¨å†Œäº‹ä»¶ Register event
event_handler = lark.EventDispatcherHandler.builder("", "") \
    .register_p2_helpdesk_ticket_updated_v1(do_p2_helpdesk_ticket_updated_v1) \
    .build()


# åˆ›å»ºè·¯ç”±å¤„ç†å™¨ Create route handler
@app.route("/webhook/event", methods=["POST"])
def event():
    resp = handler.do(parse_req())
    return parse_resp(resp)

if __name__ == "__main__":
    app.run(port=7777)

    </md-code-tab-panel>

    <md-code-tab-panel sdkType="java-sdk">

package com.lark.oapi.sample.event;

import com.lark.oapi.core.utils.Jsons;
import com.lark.oapi.service.helpdesk.HelpdeskService;
import com.lark.oapi.service.helpdesk.v1.model.P2TicketUpdatedV1;
import com.lark.oapi.sdk.servlet.ext.ServletAdapter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

// SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/java-sdk-guide/preparations
@RestController
public class EventController {

    // æ³¨å†Œäº‹ä»¶ Register event
    private static final EventDispatcher EVENT_HANDLER = EventDispatcher.newBuilder("verificationToken", "encryptKey")
            .onP2TicketUpdatedV1(new HelpdeskService.P2TicketUpdatedV1Handler() {
                @Override
                public void handle(P2TicketUpdatedV1 event) throws Exception {
                    System.out.printf("[ onP2TicketUpdatedV1 access ], data: %s\n", Jsons.DEFAULT.toJson(event.getEvent()));
                }
            })
            .build();

    // æ³¨å…¥ ServletAdapter å®ä¾‹ Inject ServletAdapter instance
    @Autowired
    private ServletAdapter servletAdapter;

    // åˆ›å»ºè·¯ç”±å¤„ç†å™¨ Create route handler
    @RequestMapping("/webhook/event")
    public void event(HttpServletRequest request, HttpServletResponse response)
            throws Throwable {
        // å›è°ƒæ‰©å±•åŒ…æä¾›çš„äº‹ä»¶å›è°ƒå¤„ç†å™¨ Callback handler provided by the extension package
        servletAdapter.handleEvent(request, response, EVENT_DISPATCHER);
    }
}
    </md-code-tab-panel>

    <md-code-tab-panel sdkType="nodejs-sdk">
// SDK ä½¿ç”¨è¯´æ˜ SDK user guideï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/nodejs-sdk/preparation-before-development
import http from 'http';
import * as lark from '@larksuiteoapi/node-sdk';

// æ³¨å†Œäº‹ä»¶ Register event
const eventDispatcher = new lark.EventDispatcher({
    encryptKey: '',
    verificationToken: '',
}).register({
    'helpdesk.ticket.updated_v1': async (data) => {
        console.log(data);
        return 'success';
    },
});

const server = http.createServer();
// åˆ›å»ºè·¯ç”±å¤„ç†å™¨ Create route handler
server.on('request', lark.adaptDefault('/webhook/event', eventDispatcher));
server.listen(3000);
    </md-code-tab-panel>

  </md-code-tab-group>
</md-code-tabs>

