## 同步三方审批实例

审批中心不负责审批的流转，审批的流转在三方系统。本接口用于把三方系统在审批流转后生成的审批实例、审批任务、审批抄送数据同步到审批中心。

## 请求

| 基本 | |
| --- | --- |
| HTTP URL | `https://open.feishu.cn/open-apis/approval/v4/external_instances` |
| HTTP Method | POST |
| 支持的访问令牌 | tenant_access_token |
| 支持的应用类型 | custom  isv |
| 权限要求 | 查看、创建、更新、删除审批应用相关信息 <br> 查看、创建、更新、删除三方审批实例相关信息 |
| 权限要求 | approval:approval <br> approval:external_instance |

### 请求体

| 参数名 | 类型 | 必填 | 描述 |
| ------ | ---- | ---- | ---- |
| approval_code | string | 是 | 审批定义 Code。[创建三方审批定义](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/approval-v4/external_approval/create)的返回值，用来指定当前实例属于的审批定义。<br>      <br>**说明**：如果在当前接口设置了 title 参数，则审批实例名称按照 title 展示。如果未设置 title，审批实例的标题取自对应审批定义（approval_code）的 name 参数。 <br> **示例**: 81D31358-93AF-92D6-7425-01A5D67C4E71  |
| status | string | 是 | 审批实例状态 <br> **示例**: PENDING <br> **可选值**:<br>- PENDING: 审批中 <br>- APPROVED: 审批流程结束，结果为同意 <br>- REJECTED: 审批流程结束，结果为拒绝 <br>- CANCELED: 审批发起人撤回 <br>- DELETED: 审批被删除 <br>- HIDDEN: 状态隐藏（不显示状态） <br>- TERMINATED: 审批终止 <br> |
| extra | string | 否 | 审批实例扩展参数，JSON 格式，传值时需要压缩转义为字符串。单据编号通过传 business_key 参数来实现。<br><br>**注意**：以下示例值未转义，使用时请注意转义。你可查看请求体示例中转义后的 extra 示例值。 <br> **示例**: {\"xxx\":\"xxx\",\"business_key\":\"xxx\"}  |
| instance_id | string | 是 | 审批实例唯一标识，自定义设置。需确保证在当前企业和应用内唯一。 <br> **示例**: 24492654  |
| links | object | 是 | 审批实例链接信息。设置的链接用于在审批中心 **已发起** 列表内点击跳转，跳回三方审批系统查看审批详情。 <br> **示例**:   |
| title | string | 否 | 审批展示名称。<br>      <br>**说明**：<br><br>- 如果填写了该参数，则审批列表中的审批名称使用该参数。如果不填该参数，则审批名称使用审批定义的名称。<br>- 这里传入的是国际化文案 Key（即 i18n_resources.texts 参数中的 Key），还需要在 i18n_resources.texts 参数中以 Key:Value 格式进行赋值。<br>- Key 需要以 @i18n@ 开头。 <br> **示例**: @i18n@1  |
| form | external_instance_form[] | 否 | 用户提交审批时填写的表单数据，用于所有审批列表中展示。可传多个值，最多展示前 3 个，长度不超过 2048 字符。<br><br>![image.png](//sf3-cn.feishucdn.com/obj/open-platform-opendoc/69fd0009295b654b28ba2fb46727b4aa_KWIEEvsNPu.png?height=294&maxWidth=200&width=626) <br> **示例**: [{ "name": "@i18n@2", "value": "@i18n@3" }]  |
| user_id | string | 否 | 审批发起人 user_id。发起人可在审批中心的 **已发起** 列表中看到所有已发起的审批。在 **待办**、**已办**、**抄送我** 列表中，该字段用来展示审批的发起人。获取方式参见[如何获取用户的 User ID](/ssl:ttdoc/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-obtain-user-id)。<br>      <br>**注意**：审批发起人的 open_id 和 user_id 需至少传入一个。 <br> **示例**: a987sf9s  |
| user_name | string | 否 | 审批发起人的用户名。如果发起人不是真实的用户（例如是某个部门），没有 user_id，则可以使用该参数传入一个名称。<br>      <br>**说明**：<br>      <br>- 这里传入的是国际化文案 Key（即 i18n_resources.texts 参数中的 Key），还需要在 i18n_resources.texts 参数中以 Key:Value 格式进行赋值。<br><br>- Key 需要以 @i18n@ 开头。 <br> **示例**: @i18n@9  |
| open_id | string | 否 | 审批发起人 open_id。发起人可在审批中心的 **已发起** 列表中看到所有已发起的审批。在 **待办**、**已办**、**抄送我** 列表中，该字段用来展示审批的发起人。获取方式参见[如何获取用户的 Open ID](/ssl:ttdoc/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-obtain-openid)。<br>      <br>**注意**：审批发起人的 open_id 和 user_id 需至少传入一个。 <br> **示例**: ou_be73cbc0ee35eb6ca54e9e7cc14998c1  |
| department_id | string | 否 | 发起人的部门 ID，用于在审批中心列表中展示发起人的所属部门，不传值则不展示。获取方式参见[部门 ID](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/contact-v3/department/field-overview#9c02ed7a)。<br>      <br>**说明**：如果用户没加入任何部门，传 `""`，默认展示企业名称。如果传入 department_name 参数，则展示对应的部门名称。 <br> **示例**: od-8ec33278bc2  |
| department_name | string | 否 | 审批发起人的部门名称。如果发起人不是真实的用户或没有部门，则可以使用该参数传入部门名称。<br><br>**说明**：<br>      <br>- 这里传入的是国际化文案 Key（即 i18n_resources.texts 参数中的 Key），还需要在 i18n_resources.texts 参数中以 Key:Value 格式进行赋值。<br>- Key 需要以 @i18n@ 开头。 <br> **示例**: @i18n@10  |
| start_time | string | 是 | 审批发起时间，Unix 毫秒时间戳。 <br> **示例**: 1556468012678  |
| end_time | string | 是 | 审批实例结束时间。未结束的审批为 0，Unix 毫秒时间戳。 <br> **示例**: 1556468012678  |
| update_time | string | 是 | 审批实例最近更新时间，用于推送数据版本控制。如果 update_mode 值为 UPDATE，则仅当传过来的 update_time 有变化时（变大），才会更新审批中心中的审批实例信息。<br>      <br>**说明**：使用该参数主要用来避免并发时，旧数据更新了新数据。 <br> **示例**: 1556468012678  |
| display_method | string | 否 | 列表页打开审批实例的方式。 <br> **示例**: BROWSER <br> **可选值**:<br>- BROWSER: 跳转系统默认浏览器打开 <br>- SIDEBAR: 飞书中侧边抽屉打开 <br>- NORMAL: 飞书内嵌页面打开 <br>- TRUSTEESHIP: 以托管打开（即托管在飞书审批中心打开） <br> |
| update_mode | string | 否 | 更新方式。<br>      <br>- 当 update_mode 取值为 REPLACE 时，每次都以当前推送的数据为最终数据，会删掉审批中心中，不在本次推送数据中的多余的任务、抄送数据。<br>- 当 update_mode 取值为 UPDATE 时，不会删除审批中心的数据，而只进行新增、更新实例与任务数据。<br><br>**默认值**：REPLACE <br> **示例**: UPDATE <br> **可选值**:<br>- REPLACE: 全量替换 <br>- UPDATE: 增量更新 <br> |
| task_list | external_instance_task_node[] | 否 | 任务列表 <br> **示例**:  <br> **数据校验规则**:<br>最大长度: 300 |
| cc_list | cc_node[] | 否 | 抄送列表 <br> **示例**:  <br> **数据校验规则**:<br>最大长度: 200 |
| i18n_resources | i18n_resource[] | 是 | 国际化文案 <br> **示例**:   |
| trusteeship_url_token | string | 否 | 单据托管认证 token，托管回调会附带此 token，帮助业务认证。 <br> **示例**: 788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306  |
| trusteeship_user_id_type | string | 否 | 用户的类型，会影响请求参数用户标识域的选择，包括加签操作回传的目标用户， 目前仅支持 user_id。 <br> **示例**: user_id  |
| trusteeship_urls | object | 否 | 单据托管回调接入方的接口 URL 地址。 <br> **示例**:   |
| trusteeship_cache_config | object | 否 | 托管预缓存策略。 <br> **示例**:   |

**类型额外说明**:

- **external_instance_link** 类型说明:

  基本属性:

   pc_link: string <br> mobile_link: string <br>
- **external_instance_form** 类型说明:

  基本属性:

   name: string <br> value: string <br>
- **external_instance_task_node** 类型说明:

  基本属性:

   task_id: string <br> user_id: string <br> open_id: string <br> title: string <br> status: string <br> extra: string <br> create_time: string <br> end_time: string <br> update_time: string <br> action_context: string <br> display_method: string <br> exclude_statistics: boolean <br> node_id: string <br> node_name: string <br>
  - **links** (object):
    - **external_instance_link** 类型说明:

      基本属性:

       pc_link: string <br> mobile_link: string <br>
  - **action_configs** (array):
    - **action_config** 类型说明:

      基本属性:

       action_type: string <br> action_name: string <br> is_need_reason: boolean <br> is_reason_required: boolean <br> is_need_attachment: boolean <br>
- **cc_node** 类型说明:

  基本属性:

   cc_id: string <br> user_id: string <br> open_id: string <br> read_status: string <br> extra: string <br> title: string <br> create_time: string <br> update_time: string <br> display_method: string <br>
  - **links** (object):
    - **external_instance_link** 类型说明:

      基本属性:

       pc_link: string <br> mobile_link: string <br>
- **i18n_resource** 类型说明:

  基本属性:

   locale: string <br> is_default: boolean <br>
  - **texts** (array):
    - **i18n_resource_text** 类型说明:

      基本属性:

       key: string <br> value: string <br>
- **trusteeship_urls** 类型说明:

  基本属性:

   form_detail_url: string <br> action_definition_url: string <br> approval_node_url: string <br> action_callback_url: string <br> pull_business_data_url: string <br>
- **trusteeship_instance_cache_config** 类型说明:

  基本属性:

   form_policy: string <br> form_vary_with_locale: boolean <br> form_version: string <br>


**请求体示例**:

```json
{
    "approval_code": "81D31358-93AF-92D6-7425-01A5D67C4E71",
    "status": "PENDING",
    "extra": "{\"xxx\":\"xxx\",\"business_key\":\"xxx\"}",
    "instance_id": "24492654",
    "links": {
        "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
        "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
    },
    "title": "@i18n@1",
    "form": [
        {
            "name": "@i18n@2",
            "value": "@i18n@3"
        }
    ],
    "user_id": "a987sf9s",
    "user_name": "@i18n@9",
    "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
    "department_id": "od-8ec33278bc2",
    "department_name": "@i18n@10",
    "start_time": "1556468012678",
    "end_time": "1556468012678",
    "update_time": "1556468012678",
    "display_method": "BROWSER",
    "update_mode": "UPDATE",
    "task_list": [
        {
            "task_id": "112534",
            "user_id": "a987sf9s",
            "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
            "title": "@i18n@4",
            "links": {
                "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
            },
            "status": "PENDING",
            "extra": "{\"xxx\":\"xxx\",\"complete_reason\":\"approved\"}",
            "create_time": "1556468012678",
            "end_time": "1556468012678",
            "update_time": "1556468012678",
            "action_context": "123456",
            "action_configs": [
                {
                    "action_type": "APPROVE",
                    "action_name": "@i18n@5",
                    "is_need_reason": false,
                    "is_reason_required": false,
                    "is_need_attachment": false
                }
            ],
            "display_method": "BROWSER",
            "exclude_statistics": false,
            "node_id": "node",
            "node_name": "i18n@name"
        }
    ],
    "cc_list": [
        {
            "cc_id": "123456",
            "user_id": "12345",
            "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
            "links": {
                "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
            },
            "read_status": "READ",
            "extra": "{\"xxx\":\"xxx\"}",
            "title": "xxx",
            "create_time": "1556468012678",
            "update_time": "1556468012678",
            "display_method": "BROWSER"
        }
    ],
    "i18n_resources": [
        {
            "locale": "zh-CN",
            "texts": [
                {
                    "key": "@i18n@1",
                    "value": "people"
                }
            ],
            "is_default": true
        }
    ],
    "trusteeship_url_token": "788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306",
    "trusteeship_user_id_type": "user_id",
    "trusteeship_urls": {
        "form_detail_url": "https://#{your_domain}/api/form_detail",
        "action_definition_url": "https://#{your_domain}/api/action_definition",
        "approval_node_url": "https://#{your_domain}/api/approval_node",
        "action_callback_url": "https://#{your_domain}/api/action_callback",
        "pull_business_data_url": "https://#{your_domain}/api/pull_business_data"
    },
    "trusteeship_cache_config": {
        "form_policy": "DISABLE",
        "form_vary_with_locale": false,
        "form_version": "1"
    }
}
```

### 响应

**响应示例**:

```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "data": {
            "approval_code": "81D31358-93AF-92D6-7425-01A5D67C4E71",
            "status": "PENDING",
            "extra": "{\"xxx\":\"xxx\",\"business_key\":\"xxx\"}",
            "instance_id": "24492654",
            "links": {
                "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
            },
            "title": "@i18n@1",
            "form": [
                {
                    "name": "@i18n@2",
                    "value": "@i18n@3"
                }
            ],
            "user_id": "a987sf9s",
            "user_name": "@i18n@9",
            "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
            "department_id": "od-8ec33278bc2",
            "department_name": "@i18n@10",
            "start_time": "1556468012678",
            "end_time": "1556468012678",
            "update_time": "1556468012678",
            "display_method": "BROWSER",
            "update_mode": "UPDATE",
            "task_list": [
                {
                    "task_id": "112534",
                    "user_id": "a987sf9s",
                    "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
                    "title": "i18n1",
                    "links": {
                        "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                        "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
                    },
                    "status": "PENDING",
                    "extra": "{\"xxx\":\"xxx\",\"complete_reason\":\"approved\"}",
                    "create_time": "1556468012678",
                    "end_time": "1556468012678",
                    "update_time": "1556468012678",
                    "action_context": "123456",
                    "action_configs": [
                        {
                            "action_type": "APPROVE",
                            "action_name": "@i18n@5",
                            "is_need_reason": false,
                            "is_reason_required": false,
                            "is_need_attachment": false
                        }
                    ],
                    "display_method": "BROWSER",
                    "exclude_statistics": false,
                    "node_id": "node",
                    "node_name": "i18n@name"
                }
            ],
            "cc_list": [
                {
                    "cc_id": "123456",
                    "user_id": "12345",
                    "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
                    "links": {
                        "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                        "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
                    },
                    "read_status": "READ",
                    "extra": "{\"xxx\":\"xxx\"}",
                    "title": "xxx",
                    "create_time": "1556468012678",
                    "update_time": "1556468012678",
                    "display_method": "BROWSER"
                }
            ],
            "i18n_resources": [
                {
                    "locale": "zh-CN",
                    "texts": [
                        {
                            "key": "@i18n@1",
                            "value": "people"
                        }
                    ],
                    "is_default": true
                }
            ],
            "trusteeship_url_token": "788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306",
            "trusteeship_user_id_type": "user_id",
            "trusteeship_urls": {
                "form_detail_url": "https://#{your_domain}/api/form_detail",
                "action_definition_url": "https://#{your_domain}/api/action_definition",
                "approval_node_url": "https://#{your_domain}/api/approval_node",
                "action_callback_url": "https://#{your_domain}/api/action_callback",
                "pull_business_data_url": "https://#{your_domain}/api/pull_business_data"
            },
            "trusteeship_cache_config": {
                "form_policy": "DISABLE",
                "form_vary_with_locale": false,
                "form_version": "1"
            }
        }
    }
}
```

### 错误码

| HTTP状态码 | 错误码 | 描述 | 排查建议 |
| ---------- | ------ | ---- | -------- |
| 400 | 1390001 | param is invalid | 参数错误。排查方案：<br><br>- 根据接口文档的参数说明，检查请求时传入的参数是否正确。<br><br>- 如果传入的有表单参数（form），则需要检查该参数内传入的表单控件数据是否正确。如果报错信息内包含控件 ID（如 `控件= widget17261088448220001`），可以调用[查看指定审批定义](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/approval-v4/approval/get)或者[获取单个审批实例详情](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/approval-v4/instance/get)接口，获取响应参数 form 值，检索有问题的控件 ID，然后检查该控件的配置是否正确。 |
| 400 | 1395001 | There have been some errors. Please try again later | 服务出现错误。排查方案：<br><br>1. 参考接口文档的参数说明，检查请求时传入的参数是否正确。如果传入的有表单参数（form），则需要检查传入的表单控件数据是否正确。<br><br>2. 降低请求频率，并重试。如果重试仍然报错，请联系[技术支持](https://applink.feishu.cn/TLJpeNdW)。 |
| 400 | 1390014 | Do not synchronize the same approval instance for a short period of time! | 短时间内不要同步相同的审批实例，请稍后重试。 |

### 调用示例

#### Python SDK

```python
import json

import lark_oapi as lark
from lark_oapi.api.approval.v4 import *


# SDK 使用说明: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/python--sdk/preparations-before-development
# 以下示例代码默认根据文档示例值填充，如果存在代码问题，请在 API 调试台填上相关必要参数后再复制代码使用
# 复制该 Demo 后, 需要将 "YOUR_APP_ID", "YOUR_APP_SECRET" 替换为自己应用的 APP_ID, APP_SECRET.
def main():
    # 创建client
    client = lark.Client.builder() \
        .app_id("YOUR_APP_ID") \
        .app_secret("YOUR_APP_SECRET") \
        .log_level(lark.LogLevel.DEBUG) \
        .build()

    # 构造请求对象
    request: CreateExternalInstanceRequest = CreateExternalInstanceRequest.builder() \
        .request_body(ExternalInstance.builder()
            .approval_code("81D31358-93AF-92D6-7425-01A5D67C4E71")
            .status("PENDING")
            .extra("{\"business_key\":\"xxx\",\"xxx\":\"xxx\"}")
            .instance_id("24492654")
            .links(ExternalInstanceLink.builder()
                .pc_link("https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234")
                .mobile_link("https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234")
                .build())
            .title("@i18n@1")
            .form([ExternalInstanceForm.builder()
                .name("@i18n@2")
                .value("@i18n@3")
                .build()
                ])
            .user_id("a987sf9s")
            .user_name("@i18n@9")
            .open_id("ou_be73cbc0ee35eb6ca54e9e7cc14998c1")
            .department_id("od-8ec33278bc2")
            .department_name("@i18n@10")
            .start_time("1556468012678")
            .end_time("1556468012678")
            .update_time("1556468012678")
            .display_method("BROWSER")
            .update_mode("UPDATE")
            .task_list([ExternalInstanceTaskNode.builder()
                .task_id("112534")
                .user_id("a987sf9s")
                .open_id("ou_be73cbc0ee35eb6ca54e9e7cc14998c1")
                .title("@i18n@4")
                .links(ExternalInstanceLink.builder()
                    .pc_link("https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234")
                    .mobile_link("https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234")
                    .build())
                .status("PENDING")
                .extra("{\"complete_reason\":\"approved\",\"xxx\":\"xxx\"}")
                .create_time("1556468012678")
                .end_time("1556468012678")
                .update_time("1556468012678")
                .action_context("123456")
                .action_configs([ActionConfig.builder()
                    .action_type("APPROVE")
                    .action_name("@i18n@5")
                    .is_need_reason(False)
                    .is_reason_required(False)
                    .is_need_attachment(False)
                    .build()
                    ])
                .display_method("BROWSER")
                .exclude_statistics(False)
                .node_id("node")
                .node_name("i18n@name")
                .build()
                ])
            .cc_list([CcNode.builder()
                .cc_id("123456")
                .user_id("12345")
                .open_id("ou_be73cbc0ee35eb6ca54e9e7cc14998c1")
                .links(ExternalInstanceLink.builder()
                    .pc_link("https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234")
                    .mobile_link("https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234")
                    .build())
                .read_status("READ")
                .extra("{\"xxx\":\"xxx\"}")
                .title("xxx")
                .create_time("1556468012678")
                .update_time("1556468012678")
                .display_method("BROWSER")
                .build()
                ])
            .i18n_resources([I18nResource.builder()
                .locale("zh-CN")
                .texts([I18nResourceText.builder()
                    .key("@i18n@1")
                    .value("people")
                    .build()
                    ])
                .is_default(True)
                .build()
                ])
            .trusteeship_url_token("788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306")
            .trusteeship_user_id_type("user_id")
            .trusteeship_urls(TrusteeshipUrls.builder()
                .form_detail_url("https://#{your_domain}/api/form_detail")
                .action_definition_url("https://#{your_domain}/api/action_definition")
                .approval_node_url("https://#{your_domain}/api/approval_node")
                .action_callback_url("https://#{your_domain}/api/action_callback")
                .pull_business_data_url("https://#{your_domain}/api/pull_business_data")
                .build())
            .trusteeship_cache_config(TrusteeshipInstanceCacheConfig.builder()
                .form_policy("DISABLE")
                .form_vary_with_locale(False)
                .form_version("1")
                .build())
            .build()) \
        .build()

    # 发起请求
    response: CreateExternalInstanceResponse = client.approval.v4.external_instance.create(request)

    # 处理失败返回
    if not response.success():
        lark.logger.error(
            f"client.approval.v4.external_instance.create failed, code: {response.code}, msg: {response.msg}, log_id: {response.get_log_id()}, resp: \n{json.dumps(json.loads(response.raw.content), indent=4, ensure_ascii=False)}")
        return

    # 处理业务结果
    lark.logger.info(lark.JSON.marshal(response.data, indent=4))


if __name__ == "__main__":
    main()

```

#### Java SDK

```java
package com.lark.oapi.sample.apiall.approvalv4;
import com.google.gson.JsonParser;
import com.lark.oapi.Client;
import com.lark.oapi.core.utils.Jsons;
import com.lark.oapi.service.approval.v4.model.*;
import java.util.HashMap;
import com.lark.oapi.core.request.RequestOptions;

// SDK 使用文档：https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/java-sdk-guide/preparations
// 复制该 Demo 后, 需要将 "YOUR_APP_ID", "YOUR_APP_SECRET" 替换为自己应用的 APP_ID, APP_SECRET.
// 以下示例代码默认根据文档示例值填充，如果存在代码问题，请在 API 调试台填上相关必要参数后再复制代码使用
public class CreateExternalInstanceSample{

  public static void main(String arg[]) throws Exception {
      // 构建client
      Client client = Client.newBuilder("YOUR_APP_ID", "YOUR_APP_SECRET").build();

      // 创建请求对象
      CreateExternalInstanceReq req = CreateExternalInstanceReq.newBuilder()
             .externalInstance(ExternalInstance.newBuilder()
                 .approvalCode("81D31358-93AF-92D6-7425-01A5D67C4E71")
                 .status("PENDING")
                 .extra("{\"business_key\":\"xxx\",\"xxx\":\"xxx\"}")
                 .instanceId("24492654")
                 .links(ExternalInstanceLink.newBuilder()
                        .pcLink("https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234")
                        .mobileLink("https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234")
                        .build())
                 .title("@i18n@1")
                 .form(new ExternalInstanceForm[]{
                    ExternalInstanceForm.newBuilder()
                      .name("@i18n@2")
                      .value("@i18n@3")
                      .build()
                    })
                 .userId("a987sf9s")
                 .userName("@i18n@9")
                 .openId("ou_be73cbc0ee35eb6ca54e9e7cc14998c1")
                 .departmentId("od-8ec33278bc2")
                 .departmentName("@i18n@10")
                 .startTime("1556468012678")
                 .endTime("1556468012678")
                 .updateTime("1556468012678")
                 .displayMethod("BROWSER")
                 .updateMode("UPDATE")
                 .taskList(new ExternalInstanceTaskNode[]{
                    ExternalInstanceTaskNode.newBuilder()
                      .taskId("112534")
                      .userId("a987sf9s")
                      .openId("ou_be73cbc0ee35eb6ca54e9e7cc14998c1")
                      .title("@i18n@4")
                      .links(ExternalInstanceLink.newBuilder()
                        .pcLink("https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234")
                        .mobileLink("https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234")
                        .build())
                      .status("PENDING")
                      .extra("{\"complete_reason\":\"approved\",\"xxx\":\"xxx\"}")
                      .createTime("1556468012678")
                      .endTime("1556468012678")
                      .updateTime("1556468012678")
                      .actionContext("123456")
                      .actionConfigs(new ActionConfig[]{
ActionConfig.newBuilder()
  .actionType("APPROVE")
  .actionName("@i18n@5")
  .isNeedReason(false)
  .isReasonRequired(false)
  .isNeedAttachment(false)
  .build()
})
                      .displayMethod("BROWSER")
                      .excludeStatistics(false)
                      .nodeId("node")
                      .nodeName("i18n@name")
                      .build()
                    })
                 .ccList(new CcNode[]{
                    CcNode.newBuilder()
                      .ccId("123456")
                      .userId("12345")
                      .openId("ou_be73cbc0ee35eb6ca54e9e7cc14998c1")
                      .links(ExternalInstanceLink.newBuilder()
                        .pcLink("https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234")
                        .mobileLink("https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234")
                        .build())
                      .readStatus("READ")
                      .extra("{\"xxx\":\"xxx\"}")
                      .title("xxx")
                      .createTime("1556468012678")
                      .updateTime("1556468012678")
                      .displayMethod("BROWSER")
                      .build()
                    })
                 .i18nResources(new I18nResource[]{
                    I18nResource.newBuilder()
                      .locale("zh-CN")
                      .texts(new I18nResourceText[]{
I18nResourceText.newBuilder()
  .key("@i18n@1")
  .value("people")
  .build()
})
                      .isDefault(true)
                      .build()
                    })
                 .trusteeshipUrlToken("788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306")
                 .trusteeshipUserIdType("user_id")
                 .trusteeshipUrls(TrusteeshipUrls.newBuilder()
                        .formDetailUrl("https://#{your_domain}/api/form_detail")
                        .actionDefinitionUrl("https://#{your_domain}/api/action_definition")
                        .approvalNodeUrl("https://#{your_domain}/api/approval_node")
                        .actionCallbackUrl("https://#{your_domain}/api/action_callback")
                        .pullBusinessDataUrl("https://#{your_domain}/api/pull_business_data")
                        .build())
                 .trusteeshipCacheConfig(TrusteeshipInstanceCacheConfig.newBuilder()
                        .formPolicy("DISABLE")
                        .formVaryWithLocale(false)
                        .formVersion("1")
                        .build())
                  .build())
             .build();

      // 发起请求
      CreateExternalInstanceResp resp = client.approval().v4().externalInstance().create(req);

       // 处理服务端错误
       if (!resp.success()) {
         System.out.println(String.format("code:%s,msg:%s,reqId:%s, resp:%s",
                    resp.getCode(), resp.getMsg(), resp.getRequestId(), Jsons.createGSON(true, false).toJson(JsonParser.parseString(new String(resp.getRawResponse().getBody(), StandardCharsets.UTF_8)))));
         return;
       }

       // 业务数据处理
         System.out.println(Jsons.DEFAULT.toJson(resp.getData()));
  }
}

```

#### Nodejs SDK

```javascript
// node-sdk使用说明：https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/nodejs-sdk/preparation-before-development
// 以下示例代码默认根据文档示例值填充，如果存在代码问题，请在 API 调试台填上相关必要参数后再复制代码使用
const lark = require('@larksuiteoapi/node-sdk');

// 开发者复制该Demo后，需要修改Demo里面的"app id", "app secret"为自己应用的appId, appSecret
const client = new lark.Client({
    appId: 'app id',
    appSecret: 'app secret',
    // disableTokenCache为true时，SDK不会主动拉取并缓存token，这时需要在发起请求时，调用lark.withTenantToken("token")手动传递
    // disableTokenCache为false时，SDK会自动管理租户token的获取与刷新，无需使用lark.withTenantToken("token")手动传递token
    disableTokenCache: true
});

client.approval.v4.externalInstance.create({
        data: {
                approval_code:'81D31358-93AF-92D6-7425-01A5D67C4E71',
                status:'PENDING',
                extra:'{"xxx":"xxx","business_key":"xxx"}',
                instance_id:'24492654',
                links:{
                        pc_link:'https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234',
                        mobile_link:'https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234',
                        },
                title:'@i18n@1',
                form:[
                    {
                      name:'@i18n@2',
                      value:'@i18n@3',
                      }
                    ],
                user_id:'a987sf9s',
                user_name:'@i18n@9',
                open_id:'ou_be73cbc0ee35eb6ca54e9e7cc14998c1',
                department_id:'od-8ec33278bc2',
                department_name:'@i18n@10',
                start_time:'1556468012678',
                end_time:'1556468012678',
                update_time:'1556468012678',
                display_method:'BROWSER',
                update_mode:'UPDATE',
                task_list:[
                    {
                      task_id:'112534',
                      user_id:'a987sf9s',
                      open_id:'ou_be73cbc0ee35eb6ca54e9e7cc14998c1',
                      title:'@i18n@4',
                      links:{
                        pc_link:'https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234',
                        mobile_link:'https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234',
                        },
                      status:'PENDING',
                      extra:'{"xxx":"xxx","complete_reason":"approved"}',
                      create_time:'1556468012678',
                      end_time:'1556468012678',
                      update_time:'1556468012678',
                      action_context:'123456',
                      action_configs:[
{
  action_type:'APPROVE',
  action_name:'@i18n@5',
  is_need_reason:false,
  is_reason_required:false,
  is_need_attachment:false,
  }
],
                      display_method:'BROWSER',
                      exclude_statistics:false,
                      node_id:'node',
                      node_name:'i18n@name',
                      }
                    ],
                cc_list:[
                    {
                      cc_id:'123456',
                      user_id:'12345',
                      open_id:'ou_be73cbc0ee35eb6ca54e9e7cc14998c1',
                      links:{
                        pc_link:'https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234',
                        mobile_link:'https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234',
                        },
                      read_status:'READ',
                      extra:'{"xxx":"xxx"}',
                      title:'xxx',
                      create_time:'1556468012678',
                      update_time:'1556468012678',
                      display_method:'BROWSER',
                      }
                    ],
                i18n_resources:[
                    {
                      locale:'zh-CN',
                      texts:[
{
  key:'@i18n@1',
  value:'people',
  }
],
                      is_default:true,
                      }
                    ],
                trusteeship_url_token:'788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306',
                trusteeship_user_id_type:'user_id',
                trusteeship_urls:{
                        form_detail_url:'https://#{your_domain}/api/form_detail',
                        action_definition_url:'https://#{your_domain}/api/action_definition',
                        approval_node_url:'https://#{your_domain}/api/approval_node',
                        action_callback_url:'https://#{your_domain}/api/action_callback',
                        pull_business_data_url:'https://#{your_domain}/api/pull_business_data',
                        },
                trusteeship_cache_config:{
                        form_policy:'DISABLE',
                        form_vary_with_locale:false,
                        form_version:'1',
                        },
        },
},
    lark.withTenantToken("t-7f1b******8e560")
).then(res => {
    console.log(res);
}).catch(e => {
    console.error(JSON.stringify(e.response.data, null, 4));
});

```

#### C#-restsharp

```csharp
var client = new RestClient("https://open.feishu.cn/open-apis/approval/v4/external_instances");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("Authorization", "Bearer t-7f1b******8e560");
request.AddHeader("Content-Type", "application/json");
var body = "{\"approval_code\":\"81D31358-93AF-92D6-7425-01A5D67C4E71\",\"cc_list\":[{\"cc_id\":\"123456\",\"create_time\":\"1556468012678\",\"display_method\":\"BROWSER\",\"extra\":\"{\\\"xxx\\\":\\\"xxx\\\"}\",\"links\":{\"mobile_link\":\"https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234\",\"pc_link\":\"https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234\"},\"open_id\":\"ou_be73cbc0ee35eb6ca54e9e7cc14998c1\",\"read_status\":\"READ\",\"title\":\"xxx\",\"update_time\":\"1556468012678\",\"user_id\":\"12345\"}],\"department_id\":\"od-8ec33278bc2\",\"department_name\":\"@i18n@10\",\"display_method\":\"BROWSER\",\"end_time\":\"1556468012678\",\"extra\":\"{\\\"xxx\\\":\\\"xxx\\\",\\\"business_key\\\":\\\"xxx\\\"}\",\"form\":[{\"name\":\"@i18n@2\",\"value\":\"@i18n@3\"}],\"i18n_resources\":[{\"is_default\":true,\"locale\":\"zh-CN\",\"texts\":[{\"key\":\"@i18n@1\",\"value\":\"people\"}]}],\"instance_id\":\"24492654\",\"links\":{\"mobile_link\":\"https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234\",\"pc_link\":\"https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234\"},\"open_id\":\"ou_be73cbc0ee35eb6ca54e9e7cc14998c1\",\"start_time\":\"1556468012678\",\"status\":\"PENDING\",\"task_list\":[{\"action_configs\":[{\"action_name\":\"@i18n@5\",\"action_type\":\"APPROVE\",\"is_need_attachment\":false,\"is_need_reason\":false,\"is_reason_required\":false}],\"action_context\":\"123456\",\"create_time\":\"1556468012678\",\"display_method\":\"BROWSER\",\"end_time\":\"1556468012678\",\"exclude_statistics\":false,\"extra\":\"{\\\"xxx\\\":\\\"xxx\\\",\\\"complete_reason\\\":\\\"approved\\\"}\",\"links\":{\"mobile_link\":\"https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234\",\"pc_link\":\"https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234\"},\"node_id\":\"node\",\"node_name\":\"i18n@name\",\"open_id\":\"ou_be73cbc0ee35eb6ca54e9e7cc14998c1\",\"status\":\"PENDING\",\"task_id\":\"112534\",\"title\":\"@i18n@4\",\"update_time\":\"1556468012678\",\"user_id\":\"a987sf9s\"}],\"title\":\"@i18n@1\",\"trusteeship_cache_config\":{\"form_policy\":\"DISABLE\",\"form_vary_with_locale\":false,\"form_version\":\"1\"},\"trusteeship_url_token\":\"788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306\",\"trusteeship_urls\":{\"action_callback_url\":\"https://#{your_domain}/api/action_callback\",\"action_definition_url\":\"https://#{your_domain}/api/action_definition\",\"approval_node_url\":\"https://#{your_domain}/api/approval_node\",\"form_detail_url\":\"https://#{your_domain}/api/form_detail\",\"pull_business_data_url\":\"https://#{your_domain}/api/pull_business_data\"},\"trusteeship_user_id_type\":\"user_id\",\"update_mode\":\"UPDATE\",\"update_time\":\"1556468012678\",\"user_id\":\"a987sf9s\",\"user_name\":\"@i18n@9\"}";
request.AddParameter("application/json", body,  ParameterType.RequestBody);
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
```

#### Php-guzzle

```php
<?php
$client = new Client();
$headers = [
  'Authorization' => 'Bearer t-7f1b******8e560',
  'Content-Type' => 'application/json'
];
$body = '{
    "approval_code": "81D31358-93AF-92D6-7425-01A5D67C4E71",
    "status": "PENDING",
    "extra": "{\"xxx\":\"xxx\",\"business_key\":\"xxx\"}",
    "instance_id": "24492654",
    "links": {
        "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
        "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
    },
    "title": "@i18n@1",
    "form": [
        {
            "name": "@i18n@2",
            "value": "@i18n@3"
        }
    ],
    "user_id": "a987sf9s",
    "user_name": "@i18n@9",
    "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
    "department_id": "od-8ec33278bc2",
    "department_name": "@i18n@10",
    "start_time": "1556468012678",
    "end_time": "1556468012678",
    "update_time": "1556468012678",
    "display_method": "BROWSER",
    "update_mode": "UPDATE",
    "task_list": [
        {
            "task_id": "112534",
            "user_id": "a987sf9s",
            "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
            "title": "@i18n@4",
            "links": {
                "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
            },
            "status": "PENDING",
            "extra": "{\"xxx\":\"xxx\",\"complete_reason\":\"approved\"}",
            "create_time": "1556468012678",
            "end_time": "1556468012678",
            "update_time": "1556468012678",
            "action_context": "123456",
            "action_configs": [
                {
                    "action_type": "APPROVE",
                    "action_name": "@i18n@5",
                    "is_need_reason": false,
                    "is_reason_required": false,
                    "is_need_attachment": false
                }
            ],
            "display_method": "BROWSER",
            "exclude_statistics": false,
            "node_id": "node",
            "node_name": "i18n@name"
        }
    ],
    "cc_list": [
        {
            "cc_id": "123456",
            "user_id": "12345",
            "open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
            "links": {
                "pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234",
                "mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234"
            },
            "read_status": "READ",
            "extra": "{\"xxx\":\"xxx\"}",
            "title": "xxx",
            "create_time": "1556468012678",
            "update_time": "1556468012678",
            "display_method": "BROWSER"
        }
    ],
    "i18n_resources": [
        {
            "locale": "zh-CN",
            "texts": [
                {
                    "key": "@i18n@1",
                    "value": "people"
                }
            ],
            "is_default": true
        }
    ],
    "trusteeship_url_token": "788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306",
    "trusteeship_user_id_type": "user_id",
    "trusteeship_urls": {
        "form_detail_url": "https://#{your_domain}/api/form_detail",
        "action_definition_url": "https://#{your_domain}/api/action_definition",
        "approval_node_url": "https://#{your_domain}/api/approval_node",
        "action_callback_url": "https://#{your_domain}/api/action_callback",
        "pull_business_data_url": "https://#{your_domain}/api/pull_business_data"
    },
    "trusteeship_cache_config": {
        "form_policy": "DISABLE",
        "form_vary_with_locale": false,
        "form_version": "1"
    }
}';
$request = new Request('POST', 'https://open.feishu.cn/open-apis/approval/v4/external_instances', $headers, $body);
$res = $client->sendAsync($request)->wait();
echo $res->getBody();
```

#### Curl

```bash
curl -i -X POST 'https://open.feishu.cn/open-apis/approval/v4/external_instances' \
-H 'Authorization: Bearer t-7f1b******8e560' \
-H 'Content-Type: application/json' \
-d '{
	"approval_code": "81D31358-93AF-92D6-7425-01A5D67C4E71",
	"cc_list": [
		{
			"cc_id": "123456",
			"create_time": "1556468012678",
			"display_method": "BROWSER",
			"extra": "{\"xxx\":\"xxx\"}",
			"links": {
				"mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234",
				"pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234"
			},
			"open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
			"read_status": "READ",
			"title": "xxx",
			"update_time": "1556468012678",
			"user_id": "12345"
		}
	],
	"department_id": "od-8ec33278bc2",
	"department_name": "@i18n@10",
	"display_method": "BROWSER",
	"end_time": "1556468012678",
	"extra": "{\"xxx\":\"xxx\",\"business_key\":\"xxx\"}",
	"form": [
		{
			"name": "@i18n@2",
			"value": "@i18n@3"
		}
	],
	"i18n_resources": [
		{
			"is_default": true,
			"locale": "zh-CN",
			"texts": [
				{
					"key": "@i18n@1",
					"value": "people"
				}
			]
		}
	],
	"instance_id": "24492654",
	"links": {
		"mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234",
		"pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234"
	},
	"open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
	"start_time": "1556468012678",
	"status": "PENDING",
	"task_list": [
		{
			"action_configs": [
				{
					"action_name": "@i18n@5",
					"action_type": "APPROVE",
					"is_need_attachment": false,
					"is_need_reason": false,
					"is_reason_required": false
				}
			],
			"action_context": "123456",
			"create_time": "1556468012678",
			"display_method": "BROWSER",
			"end_time": "1556468012678",
			"exclude_statistics": false,
			"extra": "{\"xxx\":\"xxx\",\"complete_reason\":\"approved\"}",
			"links": {
				"mobile_link": "https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234",
				"pc_link": "https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234"
			},
			"node_id": "node",
			"node_name": "i18n@name",
			"open_id": "ou_be73cbc0ee35eb6ca54e9e7cc14998c1",
			"status": "PENDING",
			"task_id": "112534",
			"title": "@i18n@4",
			"update_time": "1556468012678",
			"user_id": "a987sf9s"
		}
	],
	"title": "@i18n@1",
	"trusteeship_cache_config": {
		"form_policy": "DISABLE",
		"form_vary_with_locale": false,
		"form_version": "1"
	},
	"trusteeship_url_token": "788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306",
	"trusteeship_urls": {
		"action_callback_url": "https://#{your_domain}/api/action_callback",
		"action_definition_url": "https://#{your_domain}/api/action_definition",
		"approval_node_url": "https://#{your_domain}/api/approval_node",
		"form_detail_url": "https://#{your_domain}/api/form_detail",
		"pull_business_data_url": "https://#{your_domain}/api/pull_business_data"
	},
	"trusteeship_user_id_type": "user_id",
	"update_mode": "UPDATE",
	"update_time": "1556468012678",
	"user_id": "a987sf9s",
	"user_name": "@i18n@9"
}'
```

#### Golang SDK

```go
package main

import (
	"context"
	"fmt"
	"github.com/larksuite/oapi-sdk-go/v3"
	"github.com/larksuite/oapi-sdk-go/v3/core"
	"github.com/larksuite/oapi-sdk-go/v3/service/approval/v4"
)

// SDK 使用文档：https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/golang-sdk-guide/preparations
// 复制该 Demo 后, 需要将 "YOUR_APP_ID", "YOUR_APP_SECRET" 替换为自己应用的 APP_ID, APP_SECRET.
// 以下示例代码默认根据文档示例值填充，如果存在代码问题，请在 API 调试台填上相关必要参数后再复制代码使用
func main() {
	// 创建 Client
	client := lark.NewClient("YOUR_APP_ID", "YOUR_APP_SECRET")
	// 创建请求对象
	req := larkapproval.NewCreateExternalInstanceReqBuilder().
		ExternalInstance(larkapproval.NewExternalInstanceBuilder().
			ApprovalCode(`81D31358-93AF-92D6-7425-01A5D67C4E71`).
			Status(`PENDING`).
			Extra(`{"xxx":"xxx","business_key":"xxx"}`).
			InstanceId(`24492654`).
			Links(larkapproval.NewExternalInstanceLinkBuilder().
				PcLink(`https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234`).
				MobileLink(`https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234`).
				Build()).
			Title(`@i18n@1`).
			Form([]*larkapproval.ExternalInstanceForm{
				larkapproval.NewExternalInstanceFormBuilder().
					Name(`@i18n@2`).
					Value(`@i18n@3`).
					Build(),
			}).
			UserId(`a987sf9s`).
			UserName(`@i18n@9`).
			OpenId(`ou_be73cbc0ee35eb6ca54e9e7cc14998c1`).
			DepartmentId(`od-8ec33278bc2`).
			DepartmentName(`@i18n@10`).
			StartTime(`1556468012678`).
			EndTime(`1556468012678`).
			UpdateTime(`1556468012678`).
			DisplayMethod(`BROWSER`).
			UpdateMode(`UPDATE`).
			TaskList([]*larkapproval.ExternalInstanceTaskNode{
				larkapproval.NewExternalInstanceTaskNodeBuilder().
					TaskId(`112534`).
					UserId(`a987sf9s`).
					OpenId(`ou_be73cbc0ee35eb6ca54e9e7cc14998c1`).
					Title(`@i18n@4`).
					Links(larkapproval.NewExternalInstanceLinkBuilder().
						PcLink(`https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234`).
						MobileLink(`https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234`).
						Build()).
					Status(`PENDING`).
					Extra(`{"xxx":"xxx","complete_reason":"approved"}`).
					CreateTime(`1556468012678`).
					EndTime(`1556468012678`).
					UpdateTime(`1556468012678`).
					ActionContext(`123456`).
					ActionConfigs([]*larkapproval.ActionConfig{
						larkapproval.NewActionConfigBuilder().
							ActionType(`APPROVE`).
							ActionName(`@i18n@5`).
							IsNeedReason(false).
							IsReasonRequired(false).
							IsNeedAttachment(false).
							Build(),
					}).
					DisplayMethod(`BROWSER`).
					ExcludeStatistics(false).
					NodeId(`node`).
					NodeName(`i18n@name`).
					Build(),
			}).
			CcList([]*larkapproval.CcNode{
				larkapproval.NewCcNodeBuilder().
					CcId(`123456`).
					UserId(`12345`).
					OpenId(`ou_be73cbc0ee35eb6ca54e9e7cc14998c1`).
					Links(larkapproval.NewExternalInstanceLinkBuilder().
						PcLink(`https://applink.feishu.cn/client/mini_program/open?mode=appCenter&appId=cli_9c90fc38e07a9101&path=pc/pages/detail?id=1234`).
						MobileLink(`https://applink.feishu.cn/client/mini_program/open?appId=cli_9c90fc38e07a9101&path=pages/detail?id=1234`).
						Build()).
					ReadStatus(`READ`).
					Extra(`{"xxx":"xxx"}`).
					Title(`xxx`).
					CreateTime(`1556468012678`).
					UpdateTime(`1556468012678`).
					DisplayMethod(`BROWSER`).
					Build(),
			}).
			I18nResources([]*larkapproval.I18nResource{
				larkapproval.NewI18nResourceBuilder().
					Locale(`zh-CN`).
					Texts([]*larkapproval.I18nResourceText{
						larkapproval.NewI18nResourceTextBuilder().
							Key(`@i18n@1`).
							Value(`people`).
							Build(),
					}).
					IsDefault(true).
					Build(),
			}).
			TrusteeshipUrlToken(`788981c886b1c28ac29d1e68efd60683d6d90dfce80938ee9453e2a5f3e9e306`).
			TrusteeshipUserIdType(`user_id`).
			TrusteeshipUrls(larkapproval.NewTrusteeshipUrlsBuilder().
				FormDetailUrl(`https://#{your_domain}/api/form_detail`).
				ActionDefinitionUrl(`https://#{your_domain}/api/action_definition`).
				ApprovalNodeUrl(`https://#{your_domain}/api/approval_node`).
				ActionCallbackUrl(`https://#{your_domain}/api/action_callback`).
				PullBusinessDataUrl(`https://#{your_domain}/api/pull_business_data`).
				Build()).
			TrusteeshipCacheConfig(larkapproval.NewTrusteeshipInstanceCacheConfigBuilder().
				FormPolicy(`DISABLE`).
				FormVaryWithLocale(false).
				FormVersion(`1`).
				Build()).
			Build()).
		Build()

	// 发起请求
	resp, err := client.Approval.V4.ExternalInstance.Create(context.Background(), req)

	// 处理错误
	if err != nil {
		fmt.Println(err)
		return
	}

	// 服务端错误处理
	if !resp.Success() {
		fmt.Printf("logId: %s, error response: \n%s", resp.RequestId(), larkcore.Prettify(resp.CodeError))
		return
	}

	// 业务处理
	fmt.Println(larkcore.Prettify(resp))
}

```

