# 功能介绍
## 监听流程事件的业务场景
1. 如果流程的相关信息发生变更时，需要联动其他业务状态进行变更，则开发者可通过订阅流程事件的方式，监听流程状态变化，同步更新业务状态
2. 通过监听事件的方式避免了通过不断轮询流程详情接口获取最新状态，减少了开发复杂度和不必要的接口查询消耗

## 事件概括
流程事件指的是用户发起具体流程时，流程状态、流程节点状态、流程待办任务状态等流程相关信息发生变化的动作。可通过订阅流程事件的方式，获取流程实例完成相应事件后的流程数据状态
| 流程事件 | 触发时机 |
| --- | --- |
| 流程实例状态变化 | 流程实例状态变化时会触发该事件 |
| 流程实例信息变更 | 流程中有审批人操作、流程数据更新、流程状态变化时会触发该事件 |
| 流程节点状态变更 | 流程中节点状态变化时会触发该事件 |
| 审批任务状态变更 | 单个审批任务状态变化时会触发该事件 |
| 抄送单据状态变更 | 生成抄送单据后会触发该事件 |



## 订阅步骤

| 步骤 | 说明 |
| --- | --- |
| 1. 选择事件订阅方式 | 事件订阅方式分为 使用长连接接收事件 和 将事件发送至开发者服务器 两种，你可以根据需要自行选择任一订阅方式。<br> <br><br>如果你已经集成飞书 SDK，且正在开发的是企业自建应用，推荐你使用更加安全高效的长连接订阅方式。<br> <br>- 使用长连接接收事件 方式是飞书 SDK 内提供的能力，你可以通过集成飞书 SDK 与开放平台建立一条 WebSocket 全双工通道（你的服务器需要能够访问公网）。后续当应用订阅的事件发生时，开放平台会通过该通道向你的服务器发送消息。详细配置说明参见使用长连接接收事件。<br>- 将事件发送至开发者服务器 方式是传统的 Webhook 模式，该方式需要你提供用于接收事件消息的服务器公网地址。后续当应用订阅的事件发生时，开放平台会向服务器的公网地址发送 HTTP POST 请求，请求内包含事件数据。详细配置说明参见将事件发送至开发者服务器。 |
| 2. 添加所需事件 | 完成事件订阅方式配置后，即可为应用添加所需订阅的事件，并发布应用使配置生效。具体操作参见添加事件。事件相关的概念介绍（包括事件订阅身份、事件版本、事件结构以及事件推送机制），参见下文[事件概念](#事件概念)。 |
| 3. 接收事件 | 根据不同的事件订阅方式接收事件：<br> <br>- 使用长连接接收事件 方式已经封装了鉴权逻辑，无需进行数据解密与验签操作，直接接收来自开放平台的事件请求即可。<br>- 将事件发送至开发者服务器 方式需要你根据应用的加密策略进行安全校验，如果是加密事件，需要先解密事件，再解析事件详情。具体操作参见接收事件。 |

