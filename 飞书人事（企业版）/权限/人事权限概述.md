# 概述

权限主要面向飞书人事中各个功能模块提供角色查询、创建授权、更新授权、移除授权等权限相关的全生命周期闭环操作能力。也提供了和常用角色相关的查询接口，如查询 HRBP、查询属地 BP 等。

## 相关概念

| **名称** | **描述**                                             |
| ------ | -------------------------------------------------- |
| 用户     | 飞书人事中的用户，企业中的每个员工都是一个用户。                           |
| 角色     | 一个角色可以关联多个权限点，员工如果被授予某一个角色，则该员工就具备了该角色关联的相应权限点的权限。 |
| 权限     | 飞书人事中的每个页面、功能、操作对应不同的权限点。角色拥有某个权限点才能查看或操作对应的资源。    |
| 授权     | 给指定员工赋予相应角色的过程被称为授权。<br>为员工授权组织类角色时需要对管理维度指定相应的范围。     |

## 权限模型


![image.png](//sf3-cn.feishucdn.com/obj/open-platform-opendoc/e7e7e8453db8bbcc9caf44d55c7997d6_iupFqGOZEG.png?height=644&lazyload=true&width=1280)

## 应用场景

| **接口**                                                                                                                          | **应用场景**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [批量获取角色列表](https://open.larkoffice.com/document/server-docs/corehr-v1/authorization/list)                                       | 用于查询[「飞书人事」管理后台](https://people.feishu.cn/people)-设置-角色配置中的角色列表，返回信息中包括角色的ID、角色名称、角色类别、角色状态、管理维度、创建人等相关信息。                                                                                                                                                                                                                                                                                                                                                                                             |
| [查询员工HRBP/属地BP](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/employees-bp/batch_get)                    | 用于查询员工的HRBP和属地BP，可通过参数控制是否获取来自上级部门的HRBP和属地BP，返回的结果中主要包含BP的员工ID，如想获取详细信息可调用[搜索员工信息](https://open.larkoffice.com/document/server-docs/corehr-v1/employee/search)接口，查询员工的详细信息。                                                                                                                                                                                                                                                                                                                            |
| [查询部门HRBP](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/bp/get_by_department)                           | 用于查询部门的HRBP，通过传入部门ID来获取部门的HRBP。部门ID可从[「飞书人事」管理后台](https://people.feishu.cn/people)-组织管理-部门中查看部门详细信息和ID，也可通过[搜索部门信息](https://open.larkoffice.com/document/server-docs/corehr-v1/organization-management/department/search)接口获取。查询的返回值为BP的员工ID，如想获取详细信息可调用[搜索员工信息](https://open.larkoffice.com/document/server-docs/corehr-v1/employee/search)接口，查询员工的详细信息。                                                                                                                                              |
| [查询部门/地点的HRBP/属地BP](https://open.larkoffice.com/document/server-docs/corehr-v1/authorization/query)                             | 用于查询部门/地点的HRBP/属地BP，支持批量查询，注意当查询属地BP时，对应的部门ID也是必填项。查询的返回值为BP的员工ID，如想获取详细信息可调用[搜索员工信息](https://open.larkoffice.com/document/server-docs/corehr-v1/employee/search)接口，查询员工的详细信息。                                                                                                                                                                                                                                                                                                                         |
| [获取HRBP列表](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/bp/list)                                        | 用于查询各部门的HRBP列表，不需指定部门ID进行查询，查询的返回值为BP的员工ID和部门ID，如想获取员工详细信息可调用[搜索员工信息](https://open.larkoffice.com/document/server-docs/corehr-v1/employee/search)接口，查询员工的详细信息，如想获取部门详细信息可调用[搜索部门信息](https://open.larkoffice.com/document/server-docs/corehr-v1/organization-management/department/search)接口获取。                                                                                                                                                                                                         |
| [批量查询用户授权](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/query)                  | 用于查询[「飞书人事」管理后台](https://people.feishu.cn/people)-设置-授权配置中的授权信息，接口返回值中包含被授权的员工ID，授予的相应角色信息，授权的管理维度或范围。查询中可批量指定员工ID进行查询，查询结果中返回当前指定所有用户的授权信息。当指定角色ID时，将对返回结果进行过滤，只返回指定角色的授权信息。当都不指定时，将从租户所有员工中取前page_size个用户进行查询并返回相应的授权结果。（不建议）                                                                                                                                                                                                                                                                        |
| [查询单个用户授权](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/get_by_param)           | 用于查询[「飞书人事」管理后台](https://people.feishu.cn/people)-设置-授权配置中的单个用户的授权信息，需指定员工的ID，返回的结果中包括员工ID，授予的相应角色信息，授权的管理维度或范围。                                                                                                                                                                                                                                                                                                                                                                                       |
| [为用户授权角色](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/add_role_assign)         | 用于为员工授予角色和管理范围，当前只支持按组织架构管理的角色，该接口是数据增量授权接口，对已经被授权某个角色的用户继续授权，将在原授权的数据范围基础上追加数据范围。                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [更新用户被授权的数据范围](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/update_role_assign) | 用于更新用户被授权的数据范围，更新后的数据范围以本次提交的数据范围为准，未提交部分将被移除，请和[为用户授权角色](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/add_role_assign)对比区别使用。                                                                                                                                                                                                                                                                                                                         |
| [移除用户被授权的角色](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/remove_role_assign)   | 用于移除用户被授权的指定角色及其授权的范围，用户已经存在的授权信息可通过[查询单个用户授权](https://open.larkoffice.com/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/authorization/get_by_param)接口查询获得，也可以在[「飞书人事」管理后台](https://people.feishu.cn/people)-设置-授权配置中查看已有用户的授权信息。                                                                                                                                                                                                                                                                 |
| [获取组织类角色授权列表](https://open.larkoffice.com/document/server-docs/corehr-v1/authorization/search)                                  | 用于查询组织类角色的授权信息。需传入角色的ID，角色ID的获取方式可通过[批量获取角色列表](https://open.larkoffice.com/document/server-docs/corehr-v1/authorization/list)获取。需指定角色的管理范围。支持两种查询方式：<br>&emsp;1是只查找指定 部门/工作地点/公司/社保城市，如无授权信息则返回为空。<br>&emsp;2是当指定的 部门/工作地点/公司/社保城市 无授权信息，向上查找第一个授权记录并直接返回。<br>返回的授权列表中包含被授权的用户ID和被授权的管理维度等信息，如需获取详细信息可使用[搜索部门信息](https://open.larkoffice.com/document/server-docs/corehr-v1/organization-management/department/search)接口获取。                                                                                           |
| [【事件】组织角色授权变更](https://open.larkoffice.com/document/server-docs/corehr-v1/authorization/updated)                                | 当组织上的角色授权发生变更时，触发该事件。<br>场景示例：<br><br> 初始状态：「技术部」的 HRBP 为 「张三」<br> &emsp;管理员在 2022-12-01 操作，在「技术部」的 HRBP 上添加「李四」，并在2023-01-15 生效 <br> 触发事件结果：<br>&emsp;&emsp; 触发时间：2023-01-15<br>&emsp;&emsp; 触发内容：<br>&emsp;&emsp;&emsp;&emsp; 角色：HRBP（角色ID)<br>&emsp;&emsp;&emsp;&emsp; 部门：技术部（部门ID)<br>&emsp;&emsp;&emsp;&emsp; 员工：张三、李四（员工ID）<br><br>初始状态：「技术部」的 HRBP 为 「张三」<br>&emsp;管理员在 2022-12-01 操作，在权限管理后台删除了「张三」的 HRBP 权限<br>触发事件结果：<br>&emsp;&emsp;触发时间：2022-12-01<br>&emsp;&emsp;触发内容：<br>&emsp;&emsp;&emsp;&emsp;角色：HRBP（角色ID)<br>&emsp;&emsp;&emsp;&emsp;部门：技术部（部门ID)<br>&emsp;&emsp;&emsp;&emsp;员工：null|