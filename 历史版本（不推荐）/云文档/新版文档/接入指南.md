# æ¥å…¥æŒ‡å—


> **ğŸ“ æ³¨æ„**
> åœ¨æ¥å…¥æ–°ç‰ˆæ–‡æ¡£ OpenAPI å‰ï¼Œè¯·å…ˆé˜…è¯»[æ–°ç‰ˆæ–‡æ¡£ OpenAPI æ¥å…¥æŒ‡å¼•](https://feishu.feishu.cn/docx/ICI7dp1Uioh4EvxXn0HcxUapn0c)ã€‚


## å½¢æ€
æ–°ç‰ˆæ–‡æ¡£ç¼–è¾‘å™¨ç”±æ–‡æ¡£çº§æ¼”è¿›åˆ°æ®µè½çº§ï¼Œã€Œæ®µè½ã€é€šå¸¸ä¹Ÿç§°ä¹‹ä¸ºã€Œ**å—**ã€ï¼Œåœ¨æ–°ç‰ˆæ–‡æ¡£çš„æ•°æ®ç»“æ„ä¸­å°†å…¶å®šä¹‰ä¸º **Block**ã€‚Block ä½œä¸ºå†…å®¹ç»“æ„åŒ–çš„ç»„æˆå…ƒç´ ï¼Œæ˜¯æœ‰ç€æ˜ç¡®å«ä¹‰çš„ä¿¡æ¯å•å…ƒã€‚å¤šä¸ª Block é—´å¯ä»¥å½¢æˆæ ‘çŠ¶å…³ç³»çš„å±‚çº§å†…å®¹ï¼Œæ ‘çš„æ ¹èŠ‚ç‚¹æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ Blockï¼Œå…¶è¢«ç§°ä¸º Page Blockã€‚å¯¹äºå½¢æˆäº†çˆ¶å­å…³ç³»çš„ Blockï¼Œå„¿å­ Block è¢«ç§°ä¹‹ä¸º Childrenã€‚

## å—åˆ—è¡¨
| **ç±»å‹**   | **æè¿°**         | 
| --------- | --------------- |
|page | æ–‡æ¡£ Blockï¼Œæ˜¯æ•´ä¸ªæ–‡æ¡£æ ‘çš„æ ¹èŠ‚ç‚¹ |
|text | æ–‡æœ¬ Block|
|heading**N** | æ ‡é¢˜ Blockï¼Œheading**N**ï¼Œ**N** å–å€¼èŒƒå›´1~9|
|bullet | æ— åºåˆ—è¡¨ Block|
|ordered | æœ‰åºåˆ—è¡¨ Block|
|code | ä»£ç å— Block|
|quote | å¼•ç”¨ Block|
|todo | ä»»åŠ¡ Block|
|bitable | å¤šç»´è¡¨æ ¼ Block |
|callout | é«˜äº®å— Block|
|chat_card | ä¼šè¯å¡ç‰‡ Block|
|diagram | UML å›¾ Block|
|divider | åˆ†å‰²çº¿ Block|
|file | æ–‡ä»¶ Block|
|grid | åˆ†æ  Block|
|grid_column|åˆ†æ åˆ— Block|
|iframe|å†…åµŒ Block|
|image|å›¾ç‰‡ Block|
|isv|ä¸‰æ–¹ Block|
|mindnote|æ€ç»´ç¬”è®° Block|
|sheet|ç”µå­è¡¨æ ¼ Block|
|table|è¡¨æ ¼ Block  |
|table_cell|å•å…ƒæ ¼ Block|
|view|è§†å›¾ Block|
|quote_container|å¼•ç”¨å®¹å™¨ Block|
|task|ä»»åŠ¡ Block|
|okr|OKR Block|
|okr_objective|OKR Objective Block|
|okr_key_result|OKR Key Result Block|
|okr_progress|OKR è¿›å±• Block|
|add_ons|æ–‡æ¡£å°ç»„ä»¶ Block|
|jira_issue|Jira é—®é¢˜ Block|
|wiki_catalog|Wiki å­ç›®å½• Block|
|undefined|æœªæ”¯æŒ Block|
> Block ç±»å‹æšä¸¾å€¼å®šä¹‰ï¼šç‚¹å‡»æŸ¥çœ‹ BlockTypeã€‚
## é™åˆ¶

### QPS é™åˆ¶
æ¯ä¸ªæ¥å£éƒ½æœ‰è°ƒç”¨é¢‘ç‡é™åˆ¶ï¼Œå…·ä½“å¯å‚è€ƒå¯¹åº”æ¥å£æ–‡æ¡£çš„é¢‘æ§è¯´æ˜ã€‚

### æ¥å£é”™è¯¯
å½“è¯·æ±‚ä¸ç¬¦åˆæŸäº›ç‰¹å®šæ¡ä»¶æ—¶ä¼šæŠ¥é”™ï¼Œå…·ä½“å¯å‚è€ƒå¯¹åº”æ¥å£æ–‡æ¡£ã€Œé”™è¯¯ç ã€éƒ¨åˆ†ã€‚

### èƒ½åŠ›è¾¹ç•Œ
å½“å‰æ–°ç‰ˆæ–‡æ¡£ OpenAPI æ“ä½œ Block èƒ½åŠ›è¾¹ç•Œï¼š

| Block         | åˆ›å»º           | è¯»å–å†…å®¹        | ç¼–è¾‘å†…å®¹         |
| --------- | --------------- | -------   | ----------- |
|Callout|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|
|Table|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|
|Text|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|
|Divider|æ”¯æŒ|-|-|
|Grid|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|
|Iframe|æ”¯æŒ|æ”¯æŒ|ä¸æ”¯æŒ|
|ChatCard|æ”¯æŒ|-|-|
|Image|æ”¯æŒ|-|-|
|File|æ”¯æŒ|-|-|
|TableCell|-|æ”¯æŒ|æ”¯æŒ|
|GridColumn|-|æ”¯æŒ|æ”¯æŒ|
|View|-|æ”¯æŒ|ä¸æ”¯æŒ|
|ISV|æ”¯æŒ|-|-|
|Bitable|æ”¯æŒ|-|-|
|Sheet|æ”¯æŒ|-|-|
|Mindnote|ä¸æ”¯æŒ|-|-|
|Diagram|ä¸æ”¯æŒ|ä¸æ”¯æŒ|ä¸æ”¯æŒ|
|QuoteContainer|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|
|Task|ä¸æ”¯æŒ|-|-|
|OKR|æ”¯æŒ|æ”¯æŒ|-|
|OKR Objective|-|æ”¯æŒ|-|
|OKR Key Result|-|æ”¯æŒ|-|
|OKR Progress|-|æ”¯æŒ|-|
|Add Ons|æ”¯æŒ|æ”¯æŒ|-|
|Jira é—®é¢˜|-|æ”¯æŒ|-|
|Wiki å­ç›®å½•|æ”¯æŒ|æ”¯æŒ|-|
|Undefined|-|-|-|
> 1. ==-== è¡¨ç¤ºä¸åœ¨æ”¯æŒèŒƒå›´å†…ï¼Œæ¯”å¦‚ï¼š
>    - ä¸æ”¯æŒç›´æ¥åˆ›å»º `TableCell`ï¼Œå› ä¸ºåœ¨å¯¹ `Table` æ·»åŠ è¡Œæˆ–åˆ—æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»º `TableCell`ï¼›
>    - ä¸æ”¯æŒç›´æ¥è¯»å– `Bitable`ï¼Œå¯æ ¹æ®è¿”å›çš„ `Bitable` ==Token== è°ƒç”¨å¯¹åº”çš„ `Bitable` å¼€æ”¾æ¥å£ã€‚
> 2. Block ç±»å‹æšä¸¾å€¼å®šä¹‰ï¼šç‚¹å‡»æŸ¥çœ‹ BlockTypeã€‚
## æŸ¥è¯¢æ–‡æ¡£åŸºæœ¬ä¿¡æ¯

æŸ¥è¯¢æ–‡æ¡£çš„**æœ€æ–°ç‰ˆæœ¬å·**ã€**æ ‡é¢˜**ï¼Œè¯¥æ¥å£åªè¿”å›æ–‡æ¡£çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶ä¸è¿”å›æ–‡æ¡£å†…å®¹ã€‚
```bash 
curl --location --request GET 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ
``` 

## æŸ¥è¯¢æ–‡æ¡£çº¯æ–‡æœ¬å†…å®¹
è·å–æ–‡æ¡£çš„çº¯æ–‡æœ¬å†…å®¹ï¼Œä¸åŒ…å«å¯Œæ–‡æœ¬æ ¼å¼ä¿¡æ¯ã€‚
```bash 
curl --location --request GET 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/raw_content' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ
``` 

## è·å–æ–‡æ¡£æ‰€æœ‰å—
å¯¹æŒ‡å®šæ–‡æ¡£æ‰€æœ‰çš„å—è¿›è¡Œæ·±åº¦éå†å¹¶åˆ†é¡µè¿”å›ã€‚
```BASH 
curl --location --request GET 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks?page_size=100&document_revision_id=-1' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ
```

## åˆ›å»ºæ–‡æ¡£
æ”¯æŒé€šè¿‡ `folder_token` å‚æ•°æŒ‡å®šäº‘ç©ºé—´ç›®å½•ã€‚
```bash
curl --location --request POST 'https://open.feishu.cn/open-apis/docx/v1/documents?folder_token=fldcnbCHL8OAtkcYHnPzZi1yupN' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ
``` 

## è·å–å—
æŸ¥è¯¢æŒ‡å®šå—çš„å¯Œæ–‡æœ¬å†…å®¹ã€‚
> æ­¤æ¥å£ä¸ä¼šè¿”å›å­å—ä¿¡æ¯, å¦‚éœ€è·å–è¯·ç»“åˆä½¿ç”¨ ã€Œè·å–æ‰€æœ‰å­å—ã€ã€‚

```bash 
curl --location --request GET 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks/doxcnC4cO4qUui6isgnpofh5edc?document_revision_id=-1' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ
```  

## åˆ›å»ºå—
ä¸ºæŒ‡å®šå—åˆ›å»ºä¸€æ‰¹å­å—ï¼Œå¹¶æ’å…¥åˆ°ç‰¹å®šä½ç½®ã€‚æ­¤æ¥å£è¿”å›å€¼æ˜¯è¢«æ–°åˆ›å»ºå­å—çš„å¯Œæ–‡æœ¬å†…å®¹ã€‚<br>
> å¦‚ä¸æŒ‡å®šç‰ˆæœ¬ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚
```bash 
curl --location --request POST 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks/doxcnAJ9VRRJqVMYZ1MyKnavXWe/children?document_revision_id=120' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ \
--header 'Content-Type: application/json' \
--data-raw '{
    "index": 0,
    "children": [
        {
            "block_type": 2,
            "text": {
                "elements": [
                    {
                        "text_run": {
                            "content": "å¤šäººå®æ—¶ååŒï¼Œæ’å…¥ä¸€åˆ‡å…ƒç´ ã€‚ä¸ä»…æ˜¯åœ¨çº¿æ–‡æ¡£ï¼Œæ›´æ˜¯",
                            "text_element_style": {
                                "background_color": 14,
                                "text_color": 5
                            }
                        }
                    },
                    {
                        "text_run": {
                            "content": "å¼ºå¤§çš„åˆ›ä½œå’Œäº’åŠ¨å·¥å…·",
                            "text_element_style": {
                                "background_color": 14,
                                "bold": true,
                                "text_color": 5
                            }
                        }
                    }
                ],
                "style": {}
            }
        }
    ]
}'
``` 

## æ›´æ–°å—
æ›´æ–°æŒ‡å®šå—ï¼Œå¹¶è¿”å›å…¶æ›´æ–°åçš„å¯Œæ–‡æœ¬å†…å®¹ã€‚
> å¦‚ä¸æŒ‡å®šç‰ˆæœ¬ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
```bash 
curl --location --request PATCH 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks/doxcnC4cO4qUui6isgnpofh5edc' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ \
--header 'Content-Type: application/json' \
--data-raw '{
    "update_text_elements":{
        "elements":[
            {
                "text_run": {
                        "content": "äº‘ç©ºé—´",
                        "text_element_style": {
                            "link": {
                                "url": "https%3A%2F%2Fbytedance.feishu.cn%2Fdrive%2Fhome%2F"
                            }
                        }
                    }
            }
        ]
    }
}'
``` 

## æ‰¹é‡æ›´æ–°å—

æ‰¹é‡æ›´æ–°æŒ‡å®šå—ï¼Œå¹¶è¿”å›å…¶æ›´æ–°åçš„å¯Œæ–‡æœ¬å†…å®¹ã€‚
> å¦‚ä¸æŒ‡å®šç‰ˆæœ¬ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
```bash
curl --location --request PATCH 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks/batch_update' \
--header 'Authorization: Bearer u-xxx'  # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ  
--header 'Content-Type: application/json' \
--data-raw '{
    "requests": [
        {
            "block_id": "doxcnk0i44OMOaouw8AdXuXrp6b",
            "merge_table_cells": {
                "column_end_index": 2,
                "column_start_index": 0,
                "row_end_index": 1,
                "row_start_index": 0
            }
        },
        {
            "block_id": "doxcn0K8iGSMW4Mqgs9qlyTP50d",
            "update_text_elements": {
                "elements": [
                    {
                        "text_run": {
                            "content": "Hello",
                            "text_element_style": {
                                "background_color": 2,
                                "bold": true,
                                "italic": true,
                                "strikethrough": true,
                                "text_color": 2,
                                "underline": true                            }
                        }
                    },
                    {
                        "text_run": {
                            "content": "World ",
                            "text_element_style": {
                                "italic": true
                            }
                        }
                    },
                    {
                        "mention_doc": {
                            "obj_type": 22,
                            "token": "doxcnAJ9VRRJqVMYZ1MyKnayXWe",
                            "url": "https://test.feishu.cn/docx/doxcnAJ9VRRJqVMYZ1MyKnayXWe"
                        }
                    }
                ]
            }
        }
    ]
}'
```

## åˆ é™¤å—
æŒ‡å®šéœ€è¦æ“ä½œçš„å—ï¼Œåˆ é™¤å…¶æŒ‡å®šèŒƒå›´çš„å­å—ï¼Œå¹¶è¿”å›åº”ç”¨æ“ä½œåçš„æ–‡æ¡£ç‰ˆæœ¬ã€‚<br>
> æˆ‘ä»¬å¯ä»¥å°†æ–°ç‰ˆæ–‡æ¡£çœ‹æˆä¸€é¢— Block æ ‘ï¼Œåˆ é™¤å—å¯çœ‹æˆæ˜¯åˆ é™¤å…¶çˆ¶äº²å—çš„å­©å­ï¼Œå³å…ˆæ˜ç¡®è¦åˆ é™¤çš„å—æ˜¯å…¶çˆ¶äº²å—çš„ç¬¬å‡ ä¸ªå­©å­ï¼Œç„¶åå†è°ƒç”¨æœ¬æ¥å£è¿›è¡Œåˆ é™¤ã€‚
 ```bash 
curl --location --request DELETE 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks/doxcnAJ9VRRJqVMYZ1MyKnavXWe/children/batch_delete?document_revision_id=-1' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ \
--header 'Content-Type: application/json' \
--data-raw '{
    "start_index": 0,
    "end_index": 1
}'
``` 

## è·å–æ‰€æœ‰å­å—
æŒ‡å®šéœ€è¦æ“ä½œçš„å—ï¼Œ åˆ†é¡µéå†å…¶å­å—çš„å¯Œæ–‡æœ¬å†…å®¹ã€‚
> æ­¤æ¥å£ä»…è¿”å›å­å—çš„å¯Œæ–‡æœ¬å†…å®¹ã€‚

```bash 
curl --location --request GET 'https://open.feishu.cn/open-apis/docx/v1/documents/doxcnAJ9VRRJqVMYZ1MyKnavXWe/blocks/doxcnAJ9VRRJqVMYZ1MyKnavXWe/children?document_revision_id=-1&page_size=10' \
--header 'Authorization: Bearer u-xxx' # è°ƒç”¨å‰è¯·æ›¿æ¢ä¸ºçœŸå®çš„è®¿é—®ä»¤ç‰Œ
``` 