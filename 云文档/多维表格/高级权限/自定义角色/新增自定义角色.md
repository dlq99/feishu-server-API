## æ–°å¢è‡ªå®šä¹‰è§’è‰²(æ–°ç‰ˆ)

æ–°å¢å¤šç»´è¡¨æ ¼é«˜çº§æƒé™ä¸­è‡ªå®šä¹‰çš„è§’è‰²ã€‚

ğŸ’¡ 
 ç›¸è¾ƒäºæ—§ç‰ˆæ¥å£ï¼Œæ–°ç‰ˆè‡ªå®šä¹‰è§’è‰²æ¥å£æ”¯æŒé«˜çº§æƒé™ 2.0 ç‰ˆæœ¬æ–°å¢çš„æƒé™ç‚¹ä½ï¼ŒåŒ…æ‹¬æ›´ç²¾ç»†çš„è¡Œçº§åˆ«æƒé™æ§åˆ¶ã€å¤šç»´è¡¨æ ¼çš„å¤åˆ¶ã€å¯¼å‡ºç‚¹ä½çš„æ§åˆ¶ç­‰ã€‚

## è¯·æ±‚

| åŸºæœ¬ | |
| --- | --- |
| HTTP URL | `https://open.feishu.cn/open-apis/base/v2/apps/:app_token/roles` |
| HTTP Method | POST |
| æ”¯æŒçš„è®¿é—®ä»¤ç‰Œ | tenant_access_token, user_access_token |
| æ”¯æŒçš„åº”ç”¨ç±»å‹ | custom  isv |
| æƒé™è¦æ±‚ | æ–°å¢è‡ªå®šä¹‰è§’è‰² |
| æƒé™è¦æ±‚ | base:role:create |

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ |  æè¿° |
| ------ | ---- | ---- |
| app_token | string | å¤šç»´è¡¨æ ¼ App çš„å”¯ä¸€æ ‡è¯†ã€‚ä¸åŒå½¢æ€çš„å¤šç»´è¡¨æ ¼ï¼Œå…¶ `app_token` çš„è·å–æ–¹å¼ä¸åŒï¼š
- å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ ==**feishu.cn/base**== å¼€å¤´ï¼Œè¯¥å¤šç»´è¡¨æ ¼çš„ `app_token` æ˜¯ä¸‹å›¾é«˜äº®éƒ¨åˆ†ï¼š
    ![app_token.png](//sf3-cn.feishucdn.com/obj/open-platform-opendoc/6916f8cfac4045ba6585b90e3afdfb0a_GxbfkJHZBa.png?height=766&lazyload=true&width=3004)

- å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ ==**feishu.cn/wiki**== å¼€å¤´ï¼Œä½ éœ€è°ƒç”¨çŸ¥è¯†åº“ç›¸å…³[è·å–çŸ¥è¯†ç©ºé—´èŠ‚ç‚¹ä¿¡æ¯](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/wiki-v2/space/get_node)æ¥å£è·å–å¤šç»´è¡¨æ ¼çš„ app_tokenã€‚å½“ `obj_type` çš„å€¼ä¸º `bitable` æ—¶ï¼Œ`obj_token` å­—æ®µçš„å€¼æ‰æ˜¯å¤šç»´è¡¨æ ¼çš„ `app_token`ã€‚

äº†è§£æ›´å¤šï¼Œå‚è€ƒ[å¤šç»´è¡¨æ ¼ app_token è·å–æ–¹å¼](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/bitable-overview#-752212c)ã€‚ |

### è¯·æ±‚ä½“

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° |
| ------ | ---- | ---- | ---- |
| role_name | string | æ˜¯ | è‡ªå®šä¹‰æƒé™çš„åå­— <br> **ç¤ºä¾‹**: æ™®é€šç”¨æˆ· <br> **æ•°æ®æ ¡éªŒè§„åˆ™**:<br>æœ€å¤§é•¿åº¦: 100æœ€å°é•¿åº¦: 0 |
| table_roles | table_role[] | æ˜¯ | é’ˆå¯¹æ•°æ®è¡¨çš„æƒé™è®¾ç½® <br> **ç¤ºä¾‹**:  <br> **æ•°æ®æ ¡éªŒè§„åˆ™**:<br>æœ€å¤§é•¿åº¦: 100æœ€å°é•¿åº¦: 0 |
| block_roles | block_role[] | å¦ | é’ˆå¯¹ä»ªè¡¨ç›˜çš„æƒé™è®¾ç½® <br> **ç¤ºä¾‹**:  <br> **æ•°æ®æ ¡éªŒè§„åˆ™**:<br>æœ€å¤§é•¿åº¦: 100æœ€å°é•¿åº¦: 0 |
| base_rule | map | å¦ | å¤šç»´è¡¨æ ¼ç‚¹ä½çš„æƒé™ã€‚<br>- æœªè®¾ç½®æ—¶ï¼Œè¡¨ç¤ºè‡ªå®šä¹‰è§’è‰²æ‹¥æœ‰æ‰€æœ‰ç‚¹ä½æƒé™ã€‚<br>- è®¾ç½®æ—¶ï¼Œå¯è®¾ç½®ä»¥ä¸‹ä¸¤ç§æƒé™ï¼š<br>    -  `base_complex_edit` : è®¾ç½®æ˜¯å¦å¯ä»¥åˆ›å»ºå‰¯æœ¬ã€ä¸‹è½½ã€æ‰“å°å¤šç»´è¡¨æ ¼<br>    - `copy`: è®¾ç½®æ˜¯å¦å¯ä»¥å¤åˆ¶å¤šç»´è¡¨æ ¼å†…å®¹<br><br>è¯¥å‚æ•°ç±»å‹ä¸º mapï¼Œå…¶ä¸­ key æ˜¯æƒé™ç‚¹ä½åç§°ï¼Œvalue æ˜¯æƒé™å¼€å…³ã€‚value æšä¸¾å€¼æœ‰ï¼š<br>- `0`ï¼šæ— æƒé™<br>- `1`ï¼šæœ‰æƒé™<br><br><br>**æ³¨æ„**ï¼šä»…é«˜çº§æƒé™ä¸º v2 ç‰ˆæœ¬çš„å¤šç»´è¡¨æ ¼æ”¯æŒè¯¥å‚æ•°ã€‚æ˜¯å¦æ˜¯ v2 ç‰ˆæœ¬å¯è°ƒç”¨[è·å–å¤šç»´è¡¨æ ¼å…ƒæ•°æ®<br>](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/bitable-v1/app/get)æŸ¥çœ‹ã€‚ <br> **ç¤ºä¾‹**: {"base_complex_edit": 1, "copy": 0}  |

**ç±»å‹é¢å¤–è¯´æ˜**:

- **table_role** ç±»å‹è¯´æ˜:

  åŸºæœ¬å±æ€§:

   table_perm: integer <br> table_name: string <br> table_id: string <br> field_perm: map <br> allow_add_record: boolean <br> allow_delete_record: boolean <br> view_perm: integer <br> view_rules: map <br> field_action_rules: map <br>
  - **rec_rule** (object):
    - **rec_rule** ç±»å‹è¯´æ˜:

      åŸºæœ¬å±æ€§:

       conjunction: string <br> other_perm: integer <br>
      - **conditions** (array):
        - **rec_rule_condition** ç±»å‹è¯´æ˜:

          åŸºæœ¬å±æ€§:

           field_name: string <br> operator: string <br> values: array <br>
  - **other_rec_rule** (object):
    - **other_rec_rule** ç±»å‹è¯´æ˜:

      åŸºæœ¬å±æ€§:

       conjunction: string <br>
      - **conditions** (array):
        - **rec_rule_condition** ç±»å‹è¯´æ˜:

          åŸºæœ¬å±æ€§:

           field_name: string <br> operator: string <br> values: array <br>
- **block_role** ç±»å‹è¯´æ˜:

  åŸºæœ¬å±æ€§:

   block_id: string <br> block_perm: integer <br>


**è¯·æ±‚ä½“ç¤ºä¾‹**:

```json
{
    "role_name": "æ™®é€šç”¨æˆ·",
    "table_roles": [
        {
            "table_perm": 0,
            "table_name": "æ•°æ®è¡¨1",
            "table_id": "tblKz5D60T4JlfcT",
            "rec_rule": {
                "conditions": [
                    {
                        "field_name": "å•é€‰",
                        "operator": "is",
                        "values": [
                            "optbdVHf4q"
                        ]
                    }
                ],
                "conjunction": "and",
                "other_perm": 1
            },
            "other_rec_rule": {
                "conditions": [
                    {
                        "field_name": "å•é€‰",
                        "operator": "is",
                        "values": [
                            "optbdVHf4q"
                        ]
                    }
                ],
                "conjunction": "and"
            },
            "field_perm": {
                "å§“å": 1,
                "å¹´é¾„": 2
            },
            "allow_add_record": true,
            "allow_delete_record": true,
            "view_perm": 2,
            "view_rules": {
                "vewEYknYcC": 0
            },
            "field_action_rules": {
                "select_option_edit": {
                    "å•é€‰1": 0
                }
            }
        }
    ],
    "block_roles": [
        {
            "block_id": "blknkqrP3RqUkcAW",
            "block_perm": 0
        }
    ],
    "base_rule": {
        "base_complex_edit": 1,
        "copy": 0
    }
}
```

### å“åº”

**å“åº”ç¤ºä¾‹**:

```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "role": {
            "role_name": "è‡ªå®šä¹‰è§’è‰²1",
            "table_roles": [
                {
                    "table_perm": 0,
                    "table_name": "æ•°æ®è¡¨1",
                    "table_id": "tblKz5D60T4JlfcT",
                    "rec_rule": {
                        "conditions": [
                            {
                                "field_name": "å•é€‰",
                                "operator": "is",
                                "values": [
                                    "optbdVHf4q"
                                ],
                                "field_type": 3
                            }
                        ],
                        "conjunction": "and",
                        "perm": 1,
                        "other_perm": 1
                    },
                    "other_rec_rule": {
                        "conditions": [
                            {
                                "field_name": "å•é€‰",
                                "operator": "is",
                                "values": [
                                    "optbdVHf4q"
                                ],
                                "field_type": 3
                            }
                        ],
                        "conjunction": "and",
                        "perm": 1
                    },
                    "field_perm": {
                        "å§“å": 1,
                        "å¹´é¾„": 2
                    },
                    "allow_add_record": true,
                    "allow_delete_record": true,
                    "view_perm": 2,
                    "view_rules": {
                        "vewEYknYcC": 0
                    },
                    "field_action_rules": {
                        "select_option_edit": {
                            "å•é€‰1": 0
                        }
                    }
                }
            ],
            "role_id": "roljRpwIUt",
            "block_roles": [
                {
                    "block_id": "blknkqrP3RqUkcAW",
                    "block_perm": 0,
                    "block_type": "dashboard"
                }
            ],
            "base_rule": {
                "base_complex_edit": 1,
                "copy": 0
            }
        }
    }
}
```

### é”™è¯¯ç 

| HTTPçŠ¶æ€ç  | é”™è¯¯ç  | æè¿° | æ’æŸ¥å»ºè®® |
| ---------- | ------ | ---- | -------- |
| 200 | 1254000 | WrongRequestJson | è¯·æ±‚ä½“é”™è¯¯ |
| 200 | 1254001 | WrongRequestBody | è¯·æ±‚ä½“é”™è¯¯ |
| 200 | 1254002 | Fail | å¯¼è‡´æŠ¥ 1254002 é”™è¯¯ç çš„åœºæ™¯è¾ƒå¤šï¼Œè¯·å‚è€ƒä»¥ä¸‹å»ºè®®æ’æŸ¥ï¼š<br>- å¦‚æœå•æ¬¡æ“ä½œçš„å†…å®¹å˜æ›´è¾ƒå¤§ï¼Œè¯·å°è¯•åœ¨å•æ¬¡æ“ä½œä¸­å‡å°‘æ•°æ®é‡<br>- å¦‚æœä½ å¹¶å‘è°ƒç”¨äº†æ¥å£ï¼Œè¯·å°è¯•æ§åˆ¶è¯·æ±‚é—´éš”ï¼Œç¨åé‡è¯•<br>- å¦‚æœåœ¨çŸ¥è¯†åº“ï¼ˆwikiï¼‰ä¸­åˆ›å»ºå¤šç»´è¡¨æ ¼ï¼Œè¯·æ£€æŸ¥ä½ æ˜¯å¦ä½¿ç”¨äº†çŸ¥è¯†åº“[åˆ›å»ºçŸ¥è¯†ç©ºé—´èŠ‚ç‚¹](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/wiki-v2/space-node/create)æ¥å£åˆ›å»ºå¤šç»´è¡¨æ ¼ã€‚åœ¨æ­¤åœºæ™¯ä¸‹ä¸èƒ½ä½¿ç”¨[åˆ›å»ºå¤šç»´è¡¨æ ¼](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/bitable-v1/app/create)æ¥å£<br>- è¯·æ£€æŸ¥æ¥å£å‚æ•°æ˜¯å¦æœ‰è¯¯ã€‚ä¾‹å¦‚ï¼Œåœ¨åˆ†é¡µæŸ¥è¯¢å¤šç»´è¡¨æ ¼æ—¶ï¼Œä¼ é€’äº†æ— æ•ˆçš„ page_tokenï¼Œæˆ–ä¼ é€’äº†é”™è¯¯çš„æ•°æ®è¡¨çš„ table_id<br>- å¦‚æœè¯¥æŠ¥é”™å¶å°”å‘ç”Ÿï¼Œå¯èƒ½æ˜¯æœåŠ¡å™¨è¶…æ—¶æˆ–ä¸ç¨³å®šï¼Œè¯·é‡è¯•è§£å†³ |
| 200 | 1254003 | WrongBaseToken | app_token é”™è¯¯ã€‚app_token æ˜¯å¤šç»´è¡¨æ ¼ App çš„å”¯ä¸€æ ‡è¯†ã€‚ä¸åŒå½¢æ€çš„å¤šç»´è¡¨æ ¼ï¼Œå…¶ `app_token` çš„è·å–æ–¹å¼ä¸åŒï¼š<br>- å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ ==**feishu.cn/base**== å¼€å¤´ï¼Œè¯¥å¤šç»´è¡¨æ ¼çš„ `app_token` æ˜¯ä¸‹å›¾é«˜äº®éƒ¨åˆ†ï¼š<br>    ![app_token.png](//sf3-cn.feishucdn.com/obj/open-platform-opendoc/6916f8cfac4045ba6585b90e3afdfb0a_GxbfkJHZBa.png?height=766&lazyload=true&width=3004)<br><br>- å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ ==**feishu.cn/wiki**== å¼€å¤´ï¼Œä½ éœ€è°ƒç”¨çŸ¥è¯†åº“ç›¸å…³[è·å–çŸ¥è¯†ç©ºé—´èŠ‚ç‚¹ä¿¡æ¯](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/wiki-v2/space/get_node)æ¥å£è·å–å¤šç»´è¡¨æ ¼çš„ app_tokenã€‚å½“ `obj_type` çš„å€¼ä¸º `bitable` æ—¶ï¼Œ`obj_token` å­—æ®µçš„å€¼æ‰æ˜¯å¤šç»´è¡¨æ ¼çš„ `app_token`ã€‚<br><br>äº†è§£æ›´å¤šï¼Œå‚è€ƒ[å¤šç»´è¡¨æ ¼ app_token è·å–æ–¹å¼](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/bitable-overview#-752212c)ã€‚ |
| 200 | 1254010 | ReqConvError | è¯·æ±‚é”™è¯¯ |
| 400 | 1254032 | InvalidRoleName | è‡ªå®šä¹‰è§’è‰²åæ— æ•ˆ |
| 400 | 1254033 | RoleNameDuplicated | è‡ªå®šä¹‰è§’è‰²åé‡å¤ |
| 400 | 1254036 | Bitable is copying, please try again later. | å¤åˆ¶å¤šç»´è¡¨æ ¼ä¸ºå¼‚æ­¥æ“ä½œï¼Œè¯¥é”™è¯¯ç è¡¨ç¤ºå½“å‰å¤šç»´è¡¨æ ¼ä»åœ¨å¤åˆ¶ä¸­ï¼Œåœ¨å¤åˆ¶æœŸé—´æ— æ³•æ“ä½œå½“å‰å¤šç»´è¡¨æ ¼ã€‚éœ€è¦ç­‰å¾…å¤åˆ¶å®Œæˆåå†æ“ä½œ |
| 200 | 1254040 | BaseTokenNotFound | app_token ä¸å­˜åœ¨ã€‚app_token æ˜¯å¤šç»´è¡¨æ ¼ App çš„å”¯ä¸€æ ‡è¯†ã€‚ä¸åŒå½¢æ€çš„å¤šç»´è¡¨æ ¼ï¼Œå…¶ `app_token` çš„è·å–æ–¹å¼ä¸åŒï¼š<br>- å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ ==**feishu.cn/base**== å¼€å¤´ï¼Œè¯¥å¤šç»´è¡¨æ ¼çš„ `app_token` æ˜¯ä¸‹å›¾é«˜äº®éƒ¨åˆ†ï¼š<br>    ![app_token.png](//sf3-cn.feishucdn.com/obj/open-platform-opendoc/6916f8cfac4045ba6585b90e3afdfb0a_GxbfkJHZBa.png?height=766&lazyload=true&width=3004)<br><br>- å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ ==**feishu.cn/wiki**== å¼€å¤´ï¼Œä½ éœ€è°ƒç”¨çŸ¥è¯†åº“ç›¸å…³[è·å–çŸ¥è¯†ç©ºé—´èŠ‚ç‚¹ä¿¡æ¯](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/wiki-v2/space/get_node)æ¥å£è·å–å¤šç»´è¡¨æ ¼çš„ app_tokenã€‚å½“ `obj_type` çš„å€¼ä¸º `bitable` æ—¶ï¼Œ`obj_token` å­—æ®µçš„å€¼æ‰æ˜¯å¤šç»´è¡¨æ ¼çš„ `app_token`ã€‚<br><br>äº†è§£æ›´å¤šï¼Œå‚è€ƒ[å¤šç»´è¡¨æ ¼ app_token è·å–æ–¹å¼](/ssl:ttdoc/ukTMukTMukTM/uUDN04SN0QjL1QDN/bitable-overview#-752212c)ã€‚ |
| 404 | 1254047 | RoleIdNotFound | role_id ä¸å­˜åœ¨ã€‚role_id æ˜¯å¤šç»´è¡¨æ ¼é«˜çº§æƒé™ä¸­è‡ªå®šä¹‰è§’è‰²çš„å”¯ä¸€æ ‡è¯†ï¼Œä»¥ `rol` å¼€å¤´ã€‚å¯é€šè¿‡[åˆ—å‡ºè‡ªå®šä¹‰è§’è‰²](/ssl:ttdoc/uAjLw4CM/ukTMukTMukTM/reference/bitable-v1/app-role/list)æ¥å£è·å–ã€‚ |
| 400 | 1254110 | RoleExceedLimit | è‡ªå®šä¹‰è§’è‰²æ•°é‡è¶…é™ï¼Œé™åˆ¶ 30 æ¡ |
| 200 | 1255002 | Something went wrong. Please contact technical support at https://applink.feishu.cn/client/helpdesk/open?id=6626260912531570952 | å†…éƒ¨é”™è¯¯ï¼Œè¯·è”ç³»[æŠ€æœ¯æ”¯æŒ](https://applink.feishu.cn/TLJpeNdW) |
| 200 | 1254290 | TooManyRequest | è¯·æ±‚è¿‡å¿«ï¼Œç¨åé‡è¯• |
| 400 | 1254301 | OperationTypeError | å¤šç»´è¡¨æ ¼æœªå¼€å¯é«˜çº§æƒé™æˆ–ä¸æ”¯æŒå¼€å¯é«˜çº§æƒé™ |
| 403 | 1254304 | Only Available For Business and Enterprise Editions | ä»…ä¼ä¸šç‰ˆå’Œæ——èˆ°ç‰ˆé£ä¹¦æ”¯æŒè¡Œåˆ—æƒé™ |
| 200 | 1255001 | InternalError | å†…éƒ¨é”™è¯¯ï¼Œè¯·è”ç³»[æŠ€æœ¯æ”¯æŒ](https://applink.feishu.cn/TLJpeNdW) |
| 200 | 1255003 | MarshalError | åºåˆ—åŒ–é”™è¯¯ï¼Œè¯·è”ç³»[æŠ€æœ¯æ”¯æŒ](https://applink.feishu.cn/TLJpeNdW) |
| 200 | 1255004 | UmMarshalError | ååºåˆ—åŒ–é”™è¯¯ï¼Œè¯·è”ç³»[æŠ€æœ¯æ”¯æŒ](https://applink.feishu.cn/TLJpeNdW) |
| 504 | 1255040 | Request timed out, please try again later | è¯·æ±‚è¶…æ—¶ï¼Œè¿›è¡Œé‡è¯• |

### è°ƒç”¨ç¤ºä¾‹

#### Php-guzzle

```php
<?php
$client = new Client();
$headers = [
  'Authorization' => 'Bearer t-7f1b******8e560',
  'Content-Type' => 'application/json'
];
$body = '{
    "role_name": "æ™®é€šç”¨æˆ·",
    "table_roles": [
        {
            "table_perm": 0,
            "table_name": "æ•°æ®è¡¨1",
            "table_id": "tblKz5D60T4JlfcT",
            "rec_rule": {
                "conditions": [
                    {
                        "field_name": "å•é€‰",
                        "operator": "is",
                        "values": [
                            "optbdVHf4q"
                        ]
                    }
                ],
                "conjunction": "and",
                "other_perm": 1
            },
            "other_rec_rule": {
                "conditions": [
                    {
                        "field_name": "å•é€‰",
                        "operator": "is",
                        "values": [
                            "optbdVHf4q"
                        ]
                    }
                ],
                "conjunction": "and"
            },
            "field_perm": {
                "å§“å": 1,
                "å¹´é¾„": 2
            },
            "allow_add_record": true,
            "allow_delete_record": true,
            "view_perm": 2,
            "view_rules": {
                "vewEYknYcC": 0
            },
            "field_action_rules": {
                "select_option_edit": {
                    "å•é€‰1": 0
                }
            }
        }
    ],
    "block_roles": [
        {
            "block_id": "blknkqrP3RqUkcAW",
            "block_perm": 0
        }
    ],
    "base_rule": {
        "base_complex_edit": 1,
        "copy": 0
    }
}';
$request = new Request('POST', 'https://open.feishu.cn/open-apis/base/v2/apps/appbcbWCzen6D8dezhoCH2RpMAh/roles', $headers, $body);
$res = $client->sendAsync($request)->wait();
echo $res->getBody();
```

#### Curl

```bash
curl -i -X POST 'https://open.feishu.cn/open-apis/base/v2/apps/appbcbWCzen6D8dezhoCH2RpMAh/roles' \
-H 'Authorization: Bearer t-7f1b******8e560' \
-H 'Content-Type: application/json' \
-d '{
	"base_rule": {
		"base_complex_edit": 1,
		"copy": 0
	},
	"block_roles": [
		{
			"block_id": "blknkqrP3RqUkcAW",
			"block_perm": 0
		}
	],
	"role_name": "æ™®é€šç”¨æˆ·",
	"table_roles": [
		{
			"allow_add_record": true,
			"allow_delete_record": true,
			"field_action_rules": {
				"select_option_edit": {
					"å•é€‰1": 0
				}
			},
			"field_perm": {
				"å§“å": 1,
				"å¹´é¾„": 2
			},
			"other_rec_rule": {
				"conditions": [
					{
						"field_name": "å•é€‰",
						"operator": "is",
						"values": [
							"optbdVHf4q"
						]
					}
				],
				"conjunction": "and"
			},
			"rec_rule": {
				"conditions": [
					{
						"field_name": "å•é€‰",
						"operator": "is",
						"values": [
							"optbdVHf4q"
						]
					}
				],
				"conjunction": "and",
				"other_perm": 1
			},
			"table_id": "tblKz5D60T4JlfcT",
			"table_name": "æ•°æ®è¡¨1",
			"table_perm": 0,
			"view_perm": 2,
			"view_rules": {
				"vewEYknYcC": 0
			}
		}
	]
}'
```

#### Golang SDK

```go
package main

import (
	"context"
	"fmt"
	"github.com/larksuite/oapi-sdk-go/v3"
	"github.com/larksuite/oapi-sdk-go/v3/core"
	"github.com/larksuite/oapi-sdk-go/v3/service/base/v2"
)

// SDK ä½¿ç”¨æ–‡æ¡£ï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/golang-sdk-guide/preparations
// å¤åˆ¶è¯¥ Demo å, éœ€è¦å°† "YOUR_APP_ID", "YOUR_APP_SECRET" æ›¿æ¢ä¸ºè‡ªå·±åº”ç”¨çš„ APP_ID, APP_SECRET.
// ä»¥ä¸‹ç¤ºä¾‹ä»£ç é»˜è®¤æ ¹æ®æ–‡æ¡£ç¤ºä¾‹å€¼å¡«å……ï¼Œå¦‚æœå­˜åœ¨ä»£ç é—®é¢˜ï¼Œè¯·åœ¨ API è°ƒè¯•å°å¡«ä¸Šç›¸å…³å¿…è¦å‚æ•°åå†å¤åˆ¶ä»£ç ä½¿ç”¨
func main() {
	// åˆ›å»º Client
	client := lark.NewClient("YOUR_APP_ID", "YOUR_APP_SECRET")
	// åˆ›å»ºè¯·æ±‚å¯¹è±¡
	req := larkbase.NewCreateAppRoleReqBuilder().
		AppToken(`appbcbWCzen6D8dezhoCH2RpMAh`).
		Role(larkbase.NewRoleBuilder().
			RoleName(`æ™®é€šç”¨æˆ·`).
			TableRoles([]*larkbase.TableRole{
				larkbase.NewTableRoleBuilder().
					TablePerm(0).
					TableName(`æ•°æ®è¡¨1`).
					TableId(`tblKz5D60T4JlfcT`).
					RecRule(larkbase.NewRecRuleBuilder().
						Conditions([]*larkbase.RecRuleCondition{
							larkbase.NewRecRuleConditionBuilder().
								FieldName(`å•é€‰`).
								Operator(`is`).
								Values([]string{`optbdVHf4q`}).
								Build(),
						}).
						Conjunction(`and`).
						OtherPerm(1).
						Build()).
					OtherRecRule(larkbase.NewOtherRecRuleBuilder().
						Conditions([]*larkbase.RecRuleCondition{
							larkbase.NewRecRuleConditionBuilder().
								FieldName(`å•é€‰`).
								Operator(`is`).
								Values([]string{`optbdVHf4q`}).
								Build(),
						}).
						Conjunction(`and`).
						Build()).
					FieldPerm(map[string]interface{}{}).
					AllowAddRecord(true).
					AllowDeleteRecord(true).
					ViewPerm(2).
					ViewRules(map[string]interface{}{}).
					FieldActionRules(map[string]interface{}{}).
					Build(),
			}).
			BlockRoles([]*larkbase.BlockRole{
				larkbase.NewBlockRoleBuilder().
					BlockId(`blknkqrP3RqUkcAW`).
					BlockPerm(0).
					Build(),
			}).
			BaseRule(map[string]int{`base_complex_edit`: 1, `copy`: 0}).
			Build()).
		Build()

	// å‘èµ·è¯·æ±‚
	resp, err := client.Base.V2.AppRole.Create(context.Background(), req)

	// å¤„ç†é”™è¯¯
	if err != nil {
		fmt.Println(err)
		return
	}

	// æœåŠ¡ç«¯é”™è¯¯å¤„ç†
	if !resp.Success() {
		fmt.Printf("logId: %s, error response: \n%s", resp.RequestId(), larkcore.Prettify(resp.CodeError))
		return
	}

	// ä¸šåŠ¡å¤„ç†
	fmt.Println(larkcore.Prettify(resp))
}

```

#### Python SDK

```python
import json

import lark_oapi as lark
from lark_oapi.api.base.v2 import *


# SDK ä½¿ç”¨è¯´æ˜: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/python--sdk/preparations-before-development
# ä»¥ä¸‹ç¤ºä¾‹ä»£ç é»˜è®¤æ ¹æ®æ–‡æ¡£ç¤ºä¾‹å€¼å¡«å……ï¼Œå¦‚æœå­˜åœ¨ä»£ç é—®é¢˜ï¼Œè¯·åœ¨ API è°ƒè¯•å°å¡«ä¸Šç›¸å…³å¿…è¦å‚æ•°åå†å¤åˆ¶ä»£ç ä½¿ç”¨
# å¤åˆ¶è¯¥ Demo å, éœ€è¦å°† "YOUR_APP_ID", "YOUR_APP_SECRET" æ›¿æ¢ä¸ºè‡ªå·±åº”ç”¨çš„ APP_ID, APP_SECRET.
def main():
    # åˆ›å»ºclient
    client = lark.Client.builder() \
        .app_id("YOUR_APP_ID") \
        .app_secret("YOUR_APP_SECRET") \
        .log_level(lark.LogLevel.DEBUG) \
        .build()

    # æ„é€ è¯·æ±‚å¯¹è±¡
    request: CreateAppRoleRequest = CreateAppRoleRequest.builder() \
        .app_token("appbcbWCzen6D8dezhoCH2RpMAh") \
        .request_body(Role.builder()
            .role_name("æ™®é€šç”¨æˆ·")
            .table_roles([TableRole.builder()
                .table_perm(0)
                .table_name("æ•°æ®è¡¨1")
                .table_id("tblKz5D60T4JlfcT")
                .rec_rule(RecRule.builder()
                    .conditions([RecRuleCondition.builder()
                        .field_name("å•é€‰")
                        .operator("is")
                        .values(["optbdVHf4q"])
                        .build()
                        ])
                    .conjunction("and")
                    .other_perm(1)
                    .build())
                .other_rec_rule(OtherRecRule.builder()
                    .conditions([RecRuleCondition.builder()
                        .field_name("å•é€‰")
                        .operator("is")
                        .values(["optbdVHf4q"])
                        .build()
                        ])
                    .conjunction("and")
                    .build())
                .field_perm({"å§“å":1,"å¹´é¾„":2})
                .allow_add_record(True)
                .allow_delete_record(True)
                .view_perm(2)
                .view_rules({"vewEYknYcC":0})
                .field_action_rules({"select_option_edit":{"å•é€‰1":0}})
                .build()
                ])
            .block_roles([BlockRole.builder()
                .block_id("blknkqrP3RqUkcAW")
                .block_perm(0)
                .build()
                ])
            .base_rule({"base_complex_edit":1,"copy":0})
            .build()) \
        .build()

    # å‘èµ·è¯·æ±‚
    response: CreateAppRoleResponse = client.base.v2.app_role.create(request)

    # å¤„ç†å¤±è´¥è¿”å›
    if not response.success():
        lark.logger.error(
            f"client.base.v2.app_role.create failed, code: {response.code}, msg: {response.msg}, log_id: {response.get_log_id()}, resp: \n{json.dumps(json.loads(response.raw.content), indent=4, ensure_ascii=False)}")
        return

    # å¤„ç†ä¸šåŠ¡ç»“æœ
    lark.logger.info(lark.JSON.marshal(response.data, indent=4))


if __name__ == "__main__":
    main()

```

#### Java SDK

```java
package com.lark.oapi.sample.apiall.basev2;
import com.google.gson.JsonParser;
import com.lark.oapi.Client;
import com.lark.oapi.core.utils.Jsons;
import com.lark.oapi.service.base.v2.model.*;
import java.util.HashMap;
import com.lark.oapi.core.request.RequestOptions;

// SDK ä½¿ç”¨æ–‡æ¡£ï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/java-sdk-guide/preparations
// å¤åˆ¶è¯¥ Demo å, éœ€è¦å°† "YOUR_APP_ID", "YOUR_APP_SECRET" æ›¿æ¢ä¸ºè‡ªå·±åº”ç”¨çš„ APP_ID, APP_SECRET.
// ä»¥ä¸‹ç¤ºä¾‹ä»£ç é»˜è®¤æ ¹æ®æ–‡æ¡£ç¤ºä¾‹å€¼å¡«å……ï¼Œå¦‚æœå­˜åœ¨ä»£ç é—®é¢˜ï¼Œè¯·åœ¨ API è°ƒè¯•å°å¡«ä¸Šç›¸å…³å¿…è¦å‚æ•°åå†å¤åˆ¶ä»£ç ä½¿ç”¨
public class CreateAppRoleSample{

  public static void main(String arg[]) throws Exception {
      // æ„å»ºclient
      Client client = Client.newBuilder("YOUR_APP_ID", "YOUR_APP_SECRET").build();

      // åˆ›å»ºè¯·æ±‚å¯¹è±¡
      CreateAppRoleReq req = CreateAppRoleReq.newBuilder()
             .appToken("appbcbWCzen6D8dezhoCH2RpMAh")
             .role(Role.newBuilder()
                 .roleName("æ™®é€šç”¨æˆ·")
                 .tableRoles(new TableRole[]{
                    TableRole.newBuilder()
                      .tablePerm(0)
                      .tableName("æ•°æ®è¡¨1")
                      .tableId("tblKz5D60T4JlfcT")
                      .recRule(RecRule.newBuilder()
                        .conditions(new RecRuleCondition[]{
                        RecRuleCondition.newBuilder()
                          .fieldName("å•é€‰")
                          .operator("is")
                          .values(new String[]{"optbdVHf4q"})
                          .build()
                        })
                        .conjunction("and")
                        .otherPerm(1)
                        .build())
                      .otherRecRule(OtherRecRule.newBuilder()
                        .conditions(new RecRuleCondition[]{
                        RecRuleCondition.newBuilder()
                          .fieldName("å•é€‰")
                          .operator("is")
                          .values(new String[]{"optbdVHf4q"})
                          .build()
                        })
                        .conjunction("and")
                        .build())
                      .fieldPerm(new HashMap<String,Object>(){})
                      .allowAddRecord(true)
                      .allowDeleteRecord(true)
                      .viewPerm(2)
                      .viewRules(new HashMap<String,Object>(){})
                      .fieldActionRules(new HashMap<String,Object>(){})
                      .build()
                    })
                 .blockRoles(new BlockRole[]{
                    BlockRole.newBuilder()
                      .blockId("blknkqrP3RqUkcAW")
                      .blockPerm(0)
                      .build()
                    })
                 .baseRule(new HashMap<string,int>(){{put("base_complex_edit",1);put("copy",0);}})
                  .build())
             .build();

      // å‘èµ·è¯·æ±‚
      CreateAppRoleResp resp = client.base().v2().appRole().create(req);

       // å¤„ç†æœåŠ¡ç«¯é”™è¯¯
       if (!resp.success()) {
         System.out.println(String.format("code:%s,msg:%s,reqId:%s, resp:%s",
                    resp.getCode(), resp.getMsg(), resp.getRequestId(), Jsons.createGSON(true, false).toJson(JsonParser.parseString(new String(resp.getRawResponse().getBody(), StandardCharsets.UTF_8)))));
         return;
       }

       // ä¸šåŠ¡æ•°æ®å¤„ç†
         System.out.println(Jsons.DEFAULT.toJson(resp.getData()));
  }
}

```

#### Nodejs SDK

```javascript
// node-sdkä½¿ç”¨è¯´æ˜ï¼šhttps://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/server-side-sdk/nodejs-sdk/preparation-before-development
// ä»¥ä¸‹ç¤ºä¾‹ä»£ç é»˜è®¤æ ¹æ®æ–‡æ¡£ç¤ºä¾‹å€¼å¡«å……ï¼Œå¦‚æœå­˜åœ¨ä»£ç é—®é¢˜ï¼Œè¯·åœ¨ API è°ƒè¯•å°å¡«ä¸Šç›¸å…³å¿…è¦å‚æ•°åå†å¤åˆ¶ä»£ç ä½¿ç”¨
const lark = require('@larksuiteoapi/node-sdk');

// å¼€å‘è€…å¤åˆ¶è¯¥Demoåï¼Œéœ€è¦ä¿®æ”¹Demoé‡Œé¢çš„"app id", "app secret"ä¸ºè‡ªå·±åº”ç”¨çš„appId, appSecret
const client = new lark.Client({
    appId: 'app id',
    appSecret: 'app secret',
    // disableTokenCacheä¸ºtrueæ—¶ï¼ŒSDKä¸ä¼šä¸»åŠ¨æ‹‰å–å¹¶ç¼“å­˜tokenï¼Œè¿™æ—¶éœ€è¦åœ¨å‘èµ·è¯·æ±‚æ—¶ï¼Œè°ƒç”¨lark.withTenantToken("token")æ‰‹åŠ¨ä¼ é€’
    // disableTokenCacheä¸ºfalseæ—¶ï¼ŒSDKä¼šè‡ªåŠ¨ç®¡ç†ç§Ÿæˆ·tokençš„è·å–ä¸åˆ·æ–°ï¼Œæ— éœ€ä½¿ç”¨lark.withTenantToken("token")æ‰‹åŠ¨ä¼ é€’token
    disableTokenCache: true
});

client.base.v2.appRole.create({
        path: {
                app_token:'appbcbWCzen6D8dezhoCH2RpMAh',
        },
        data: {
                role_name:'æ™®é€šç”¨æˆ·',
                table_roles:[
                    {
                      table_perm:0,
                      table_name:'æ•°æ®è¡¨1',
                      table_id:'tblKz5D60T4JlfcT',
                      rec_rule:{
                        conditions:[
                        {
                          field_name:'å•é€‰',
                          operator:'is',
                          values:['optbdVHf4q'],
                          }
                        ],
                        conjunction:'and',
                        other_perm:1,
                        },
                      other_rec_rule:{
                        conditions:[
                        {
                          field_name:'å•é€‰',
                          operator:'is',
                          values:['optbdVHf4q'],
                          }
                        ],
                        conjunction:'and',
                        },
                      field_perm:new Map(),
                      allow_add_record:true,
                      allow_delete_record:true,
                      view_perm:2,
                      view_rules:new Map(),
                      field_action_rules:new Map(),
                      }
                    ],
                block_roles:[
                    {
                      block_id:'blknkqrP3RqUkcAW',
                      block_perm:0,
                      }
                    ],
                base_rule:new Map([['base_complex_edit',1],['copy',0],]),
        },
},
    lark.withTenantToken("t-7f1b******8e560")
).then(res => {
    console.log(res);
}).catch(e => {
    console.error(JSON.stringify(e.response.data, null, 4));
});

```

#### C#-restsharp

```csharp
var client = new RestClient("https://open.feishu.cn/open-apis/base/v2/apps/appbcbWCzen6D8dezhoCH2RpMAh/roles");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("Authorization", "Bearer t-7f1b******8e560");
request.AddHeader("Content-Type", "application/json");
var body = "{\"base_rule\":{\"base_complex_edit\":1,\"copy\":0},\"block_roles\":[{\"block_id\":\"blknkqrP3RqUkcAW\",\"block_perm\":0}],\"role_name\":\"æ™®é€šç”¨æˆ·\",\"table_roles\":[{\"allow_add_record\":true,\"allow_delete_record\":true,\"field_action_rules\":{\"select_option_edit\":{\"å•é€‰1\":0}},\"field_perm\":{\"å§“å\":1,\"å¹´é¾„\":2},\"other_rec_rule\":{\"conditions\":[{\"field_name\":\"å•é€‰\",\"operator\":\"is\",\"values\":[\"optbdVHf4q\"]}],\"conjunction\":\"and\"},\"rec_rule\":{\"conditions\":[{\"field_name\":\"å•é€‰\",\"operator\":\"is\",\"values\":[\"optbdVHf4q\"]}],\"conjunction\":\"and\",\"other_perm\":1},\"table_id\":\"tblKz5D60T4JlfcT\",\"table_name\":\"æ•°æ®è¡¨1\",\"table_perm\":0,\"view_perm\":2,\"view_rules\":{\"vewEYknYcC\":0}}]}";
request.AddParameter("application/json", body,  ParameterType.RequestBody);
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
```

